<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Analyse et mod√©lisation d‚Äôagro√©cosyst√®mes sur R - 2&nbsp; La science des donn√©es avec R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03-tableaux.html" rel="next">
<link href="./01-intro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body class="nav-sidebar floating">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02-R.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">La science des donn√©es avec R</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Analyse et mod√©lisation d‚Äôagro√©cosyst√®mes sur R</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/chavalli/ecologie-mathematique-R/tree/h2024" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pr√©face</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-R.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">La science des donn√©es avec R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-tableaux.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Organisation des donn√©es et op√©rations sur des tableaux</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-visualisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Visualisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Science ouverte et reproductibilit√©</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Introduction √† Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07a-biostats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Biostatistiques</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07b-bayes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Introduction √† l‚Äôanalyse bay√©sienne en √©cologie</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">R√©gression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-explorer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Explorer R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-ordination.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Association, partitionnement et ordination</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-imputation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">D√©tection de valeurs aberrantes et imputation de donn√©es manquantes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-series-temporelles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Les s√©ries temporelles</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-autoapprentissage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Introduction √† l‚Äôautoapprentissage</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-donnees-spatiales.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Les donn√©es g√©ospatiales</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-modelisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Mod√©lisation de m√©canismes √©cologiques</span></span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#statistiques-ou-science-des-donn%C3%A9es" id="toc-statistiques-ou-science-des-donn√©es" class="nav-link active" data-scroll-target="#statistiques-ou-science-des-donn%C3%A9es"><span class="header-section-number">2.1</span> Statistiques ou science des donn√©es?</a></li>
  <li><a href="#d%C3%A9buter-en-r" id="toc-d√©buter-en-r" class="nav-link" data-scroll-target="#d%C3%A9buter-en-r"><span class="header-section-number">2.2</span> D√©buter en R</a></li>
  <li>
<a href="#pr%C3%A9parer-son-flux-de-travail" id="toc-pr√©parer-son-flux-de-travail" class="nav-link" data-scroll-target="#pr%C3%A9parer-son-flux-de-travail"><span class="header-section-number">2.3</span> Pr√©parer son flux de travail</a>
  <ul class="collapse">
<li><a href="#installation-classique" id="toc-installation-classique" class="nav-link" data-scroll-target="#installation-classique"><span class="header-section-number">2.3.1</span> Installation classique</a></li>
  <li><a href="#installation-avec-anaconda" id="toc-installation-avec-anaconda" class="nav-link" data-scroll-target="#installation-avec-anaconda"><span class="header-section-number">2.3.2</span> Installation avec Anaconda</a></li>
  <li><a href="#utilisation-infonuagique" id="toc-utilisation-infonuagique" class="nav-link" data-scroll-target="#utilisation-infonuagique"><span class="header-section-number">2.3.3</span> Utilisation infonuagique</a></li>
  </ul>
</li>
  <li>
<a href="#premiers-pas-avec-r" id="toc-premiers-pas-avec-r" class="nav-link" data-scroll-target="#premiers-pas-avec-r"><span class="header-section-number">2.4</span> Premiers pas avec R</a>
  <ul class="collapse">
<li><a href="#types-de-donn%C3%A9es" id="toc-types-de-donn√©es" class="nav-link" data-scroll-target="#types-de-donn%C3%A9es"><span class="header-section-number">2.4.1</span> Types de donn√©es</a></li>
  <li><a href="#les-collections-de-donn%C3%A9es" id="toc-les-collections-de-donn√©es" class="nav-link" data-scroll-target="#les-collections-de-donn%C3%A9es"><span class="header-section-number">2.4.2</span> Les collections de donn√©es</a></li>
  <li><a href="#les-fonctions" id="toc-les-fonctions" class="nav-link" data-scroll-target="#les-fonctions"><span class="header-section-number">2.4.3</span> Les fonctions</a></li>
  <li><a href="#les-boucles" id="toc-les-boucles" class="nav-link" data-scroll-target="#les-boucles"><span class="header-section-number">2.4.4</span> Les boucles</a></li>
  <li><a href="#conditions-if-else-if-else" id="toc-conditions-if-else-if-else" class="nav-link" data-scroll-target="#conditions-if-else-if-else"><span class="header-section-number">2.4.5</span> Conditions: <code>if</code>, <code>else if</code>, <code>else</code></a></li>
  <li><a href="#installer-et-charger-un-module" id="toc-installer-et-charger-un-module" class="nav-link" data-scroll-target="#installer-et-charger-un-module"><span class="header-section-number">2.4.6</span> Installer et charger un module</a></li>
  </ul>
</li>
  <li><a href="#enfin" id="toc-enfin" class="nav-link" data-scroll-target="#enfin"><span class="header-section-number">2.5</span> Enfin‚Ä¶</a></li>
  <li><a href="#petit-truc" id="toc-petit-truc" class="nav-link" data-scroll-target="#petit-truc"><span class="header-section-number">2.6</span> Petit truc!</a></li>
  <li><a href="#extra-jupyter" id="toc-extra-jupyter" class="nav-link" data-scroll-target="#extra-jupyter"><span class="header-section-number">2.7</span> Extra: Utiliser R avec Jupyter</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-R" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">La science des donn√©es avec R</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><hr>
<p><strong>Objectifs sp√©cifiques</strong>:</p>
<p>√Ä la fin de ce chapitre, vous</p>
<ul>
<li>saurez contextualiser la science des donn√©es par rapport aux statistiques,</li>
<li>serez en mesure de vous lancer dans un environnement de programmation R,</li>
<li>serez en mesure d‚Äôeffectuer des op√©rations de base en R,</li>
<li>saurez diff√©rencier les grands types d‚Äôobjets de R et</li>
<li>saurez installer et charger des modules compl√©mentaire.</li>
</ul>
<hr>
<p>Un projet en science des donn√©es comprend trois grandes √©tapes. D‚Äôabord, vous devez <strong>collecter des donn√©es</strong> et les compiler ad√©quatement. Cela peut consister √† t√©l√©charger des donn√©es existantes, ex√©cuter un dispositif exp√©rimental ou effectuer une recensement (√©tude observationnelle). Compiler les donn√©es dans un format qui puisse √™tre import√© est une t√¢che souvent longue et fastidieuse. Puis, vous <strong>investiguez les donn√©es</strong> collect√©es, c‚Äôest-√†-dire que vous les visualisez, vous appliquez des mod√®les et testez des hypoth√®ses. Enfin, la <strong>communication des r√©sultats</strong> consiste √† pr√©senter les connaissances qui √©mergent de votre analyse sous forme visuelle et narrative, <em>avec un langage adapt√© √† la personne qui vous √©coute</em>, qu‚Äôelle soit experte ou novice, r√©viseure de revue savante ou gestionnaire <a href="https://r4ds.hadley.nz/intro">Grolemund et Wickham (2023)</a> propose la structure d‚Äôanalyse de la <a href="#fig-R-data-flow-chart">Figure&nbsp;<span>2.1</span></a>, avec de l√©g√®res modifications de ma part.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-R-data-flow-chart" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/02_science-des-donnees-flow_.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.1: Flux des donn√©es en sciences des donn√©es.</figcaption></figure>
</div>
</div>
</div>
<p>Le grand cadre sp√©cifie <strong>Programmer</strong>. Oui, vous aurez besoin d‚Äô√©crire du code. Mais comme je l‚Äôai indiqu√© dans le premier chapitre, ceci n‚Äôest pas un cours de programmation et je pr√©f√©rerai les approches intuitives.</p>
<section id="statistiques-ou-science-des-donn√©es" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="statistiques-ou-science-des-donn√©es">
<span class="header-section-number">2.1</span> Statistiques ou science des donn√©es?</h2>
<p>Selon <a href="http://whitlockschluter.zoology.ubc.ca/">Whitlock et Schluter (2015)</a>, la statistique est l‚Äô<em>√©tude des m√©thodes pour d√©crire et mesurer des aspects de la nature √† partir d‚Äô√©chantillon</em>. Pour <a href="https://r4ds.hadley.nz/intro">Grolemund et Wickham (2023)</a>, la science des donn√©es est <em>une discipline excitante permettant de transformer des donn√©es brutes en compr√©hension, perspectives et connaissances</em>. Oui, <em>excitante</em>! La diff√©rence entre les deux champs d‚Äôexpertise est subtile, et certaines personnes n‚Äôy voient qu‚Äôune diff√©rence de ton.</p>
<blockquote class="twitter-tweet blockquote" data-lang="fr">
<p lang="en" dir="ltr">
Data Science is statistics on a Mac.
</p>
‚Äî Big Data Borat (<span class="citation" data-cites="BigDataBorat">@BigDataBorat</span>) <a href="https://twitter.com/BigDataBorat/status/372350993255518208?ref_src=twsrc%5Etfw">27 ao√ªt 2013</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>Confin√©es √† ses applications traditionnelles, les statistiques sont davantage vou√©es √† la d√©finition de dispositifs exp√©rimentaux et √† l‚Äôex√©cution de tests d‚Äôhypoth√®ses, alors que la science des donn√©es est moins lin√©aire, en particulier dans sa phase d‚Äôanalyse, o√π de nouvelles questions (donc de nouvelles hypoth√®ses) peuvent √™tre pos√©es au fur et √† mesure de l‚Äôanalyse. Cela arrive g√©n√©ralement davantage lorsque l‚Äôon fait face √† de nombreuses observations sur lesquelles de nombreux param√®tres sont mesur√©s.</p>
<p>La quantit√© de donn√©es et de mesures auxquelles nous avons aujourd‚Äôhui acc√®s gr√¢ce aux technologies de mesure et de stockage relativement peu dispendieux rend la science des donn√©es une discipline particuli√®rement attrayante, pour ne pas dire <a href="https://hbr.org/2012/10/data-scientist-the-sexiest-job-of-the-21st-century">sexy</a>.</p>
</section><section id="d√©buter-en-r" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="d√©buter-en-r">
<span class="header-section-number">2.2</span> D√©buter en R</h2>
<p><a href="https://www.r-project.org">R</a> est un langage de programmation d√©riv√© du langage S, qui fut initialement lanc√© en 1976.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-R-logo" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/02_R_logo.svg.png" class="img-fluid figure-img" style="width:25.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.2: Logo officiel du language R.</figcaption></figure>
</div>
</div>
</div>
<p>R figure parmi <a href="https://www.tiobe.com/tiobe-index/">les langages de programmation les plus utilis√©s au monde</a>. Bien qu‚Äôil soit bas√© sur les langages statiques C et Fortran, R est un langage dynamique, c‚Äôest-√†-dire que le code peut √™tre ex√©cut√© ligne par ligne ou bloc par bloc: un avantage majeur pour des activit√©s qui n√©cessitent des interactions fr√©quentes. Bien que R soit surtout utilis√© pour le calcul statistique, il s‚Äôimpose de plus en plus comme outil privil√©gi√© en sciences des donn√©es en raison des r√©cents d√©veloppements de modules d‚Äôanalyse, de mod√©lisation et de visualisation, dont plusieurs seront utilis√©s dans ce manuel.</p>
<p>Un langage de programmation s‚Äôapprend un peu comme une langue. Au d√©but, un code R peut sembler incompr√©hensible. Et face √† son clavier, on ne sait pas trop comment exprimer ce que l‚Äôon d√©sire. Au fur et √† mesure de l‚Äôapprentissage, les symboles, les fonctions et le style deviennent de plus en plus familiers et on apprend tranquillement √† traduire en code ce que l‚Äôon d√©sire effectuer. Comme une langue s‚Äôapprend en la parlant dans la vie de tous les jours, un language de programmation s‚Äôapprend avantageusement en solutionnant vos propres probl√®mes (<a href="#fig-R-first-and-then">Figure&nbsp;<span>2.3</span></a>).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-R-first-and-then" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/02_r_first_then.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.3: R avant et maintenant, Illustration de <a href="https://github.com/allisonhorst/stats-illustrations">Allison Horst</a></figcaption></figure>
</div>
</div>
</div>
</section><section id="pr√©parer-son-flux-de-travail" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="pr√©parer-son-flux-de-travail">
<span class="header-section-number">2.3</span> Pr√©parer son flux de travail</h2>
<p>Il existe de nombreuses mani√®res d‚Äôutiliser R. Parmi celles-ci, j‚Äôen couvrirai 3:</p>
<ul>
<li>Installation classique (installation sugg√©r√©e)</li>
<li>Installation avec Anaconda</li>
<li>Utilisation infonuagique</li>
</ul>
<section id="installation-classique" class="level3" data-number="2.3.1"><h3 data-number="2.3.1" class="anchored" data-anchor-id="installation-classique">
<span class="header-section-number">2.3.1</span> Installation classique</h3>
<p><strong>Installation sugg√©r√©e</strong>. Sur Windows ou Mac, dirigez-vous <a href="https://cloud.r-project.org/">ici</a>, t√©l√©chargez et installez. Sur Linux, ouvrez votre gestionnaire d‚Äôapplication, chercher <code>r-base</code> (Ubuntu, Debian), <code>R-base</code> (openSuse) ou <code>R-core</code> (Fedora) et installez-le (assurez-vous que les librairies suivantes sont aussi install√©es: <code>gcc</code>, <code>gcc-fortran</code>, <code>gcc-c++</code> et <code>make</code>), vous aurez peut-√™tre besoin d‚Äôinstaller des librairies suppl√©mentaires pour faire fonctionner certains modules.</p>
<blockquote class="blockquote">
<p><strong>Note</strong>. Les modules pr√©sent√©s dans ce cours devraient √™tre disponibles sur Linux, Windows et Mac. Ce n‚Äôest pas le cas pour tous les modules R. La plupart fonctionnent n√©anmoins sur Linux, dont les syst√®mes d‚Äôop√©ration (je recommande <a href="https://www.ubuntu.com/download/desktop">Ubuntu</a> ou l‚Äôune de ses d√©riv√©es comme <a href="https://elementary.io/">elementary OS</a>) sont de bonnes options pour le calcul scientifique.</p>
</blockquote>
<p>√Ä cette √©tape, R devrait fonctionner dans un interpr√©teur de commande . Si vous lancez R dans un terminal (chercher <code>cmd</code> dans le menu si vous √™tes sur Windows), vous obtiendrez quelque chose comme ceci.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-R-terminal" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/02_terminal-prompt.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.4: R dans le terminal.</figcaption></figure>
</div>
</div>
</div>
<p>Le symbole <code>&gt;</code> indique que R attend que vos instructions. Vous voil√† dans un √©tat m√©ditatif devant l‚Äôind√©chiffrable vide du terminal üòµ. Ne vous en faites pas: nous commencerons bient√¥t √† jaser avec R.</p>
<p>Avant cela, installons-nous au salon. Afin de travailler dans un environnement de travail plus confortable, je recommande l‚Äôinstallation de l‚Äôinterface <a href="https://posit.co/download/rstudio-desktop/">RStudio</a>, gratuite et open source: t√©l√©chargez l‚Äôinstallateur et suivez les instructions. RStudio ressemble √† ceci.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-R-rstudio" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/02_rstudio.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.5: Fen√™tre de RStudio.</figcaption></figure>
</div>
</div>
</div>
<p>En haut √† droite se trouve un menu <em>Project (None)</em>. Il s‚Äôagit d‚Äôun menu de vos projets. Je recommande d‚Äôutiliser ces projets avec RStudio, qui vous permettront de mieux g√©rer vos sessions de travail, en particulier en lien avec les chemins vers vos donn√©es, graphiques, etc., que vous pouvez g√©rer relativement √† l‚Äôemplacement de votre dossier de projet plut√¥t qu‚Äô√† l‚Äôemplacement des fichiers sur votre machine: nous verrons plus en d√©tails au <a href="05-github.html">chapitre&nbsp;<span>5</span></a>.</p>
<ul>
<li>En haut √† gauche, vous avez vos feuilles de calcul, qui appara√Ætront en tant qu‚Äôonglets. Une feuille de calcul <em>R script</em> est une s√©rie de commandes que vous lancez en s√©quence. Il peut aussi s‚Äôagir d‚Äôun document <em>Quarto</em> si vous choisissez de travailler ainsi. Ce format vous permettra de d‚Äô√©crire du texte en format <a href="https://quarto.org/docs/authoring/markdown-basics.html"><em>Markdown</em></a> entre des blocs de code. Il est question du format <em>Quarto</em> au <a href="05-github.html">chapitre&nbsp;<span>5</span></a>).</li>
<li>En bas √† gauche appara√Æt la Console, o√π vous voyez les commandes envoy√©es √† R ainsi que ses sorties.</li>
<li>En haut √† droite, les diff√©rents onglets indiquent o√π vous en √™tes dans vos calculs. En particulier, la liste sous <em>Environment</em> indique les objets qui ont √©t√© g√©n√©r√©s ou charg√©s jusqu‚Äôalors.</li>
<li>En bas √† droite, on retrouve des onglets de nature vari√©s. <em>Files</em> contient les sous-dossiers et fichiers du dossier de projets. <em>Plots</em> est l‚Äôendroit o√π appara√Ætront vos graphiques. <em>Packages</em> contient la liste des modules d√©j√† install√©s, ainsi qu‚Äôun outil de gestion des modules pour leur installation, leur d√©sinstallation et leur mise √† jour. <em>Help</em> affiche les fiches d‚Äôaide des fonctions (pour obtenir de l‚Äôaide sur une fonction dans RStudio, surlignez la fonction dans votre feuille de calcul, puis appuyez sur <code>F1</code>). Enfin, l‚Äôonglet <em>Viewer</em> affichera les sorties HTML, en particulier les graphiques interactifs que vous g√©n√©rerez par exemple avec le module <code>plotly</code>, ou alors le rendu de votre fichier <em>Quarto</em>. Si votre environnement de travail √©tait un avion, R serait le moteur et RStudio serait le cockpit!</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-R-fifi" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="https://media.giphy.com/media/GmaV9oet9MAmI/giphy.gif" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.6: Sc√®ne de Fifi Brindacier (<a href="https://fr.wikipedia.org/wiki/Fifi_Brindacier">Astrid Lindgren, 1945</a>).</figcaption></figure>
</div>
</div>
</div>
</section><section id="installation-avec-anaconda" class="level3" data-number="2.3.2"><h3 data-number="2.3.2" class="anchored" data-anchor-id="installation-avec-anaconda">
<span class="header-section-number">2.3.2</span> Installation avec Anaconda</h3>
<p>Si vous cherchez une trousse compl√®te d‚Äôanalyse de donn√©es, comprenant R et Python, vous pourrez pr√©f√©rer <a href="https://www.anaconda.com/download">Anaconda</a>. Une fois install√©e, vous pourrez isoler un environnement de travail sur R, ou m√™me isoler des environnements de travail particuliers pour vos projets. Une mani√®re conviviale de cr√©er des environnements de travail est de passer par l‚Äôinterface <em>Anaconda navigator</em>, que vous lancerez soit dans le menu Windows, soit en ligne de commande <code>anaconda-navigator</code> sous Mac et Linux, puis d‚Äôinstaller <code>r-essentials</code>, <code>rstudio</code> et <code>jupyterlab</code> dans l‚Äôonglet <em>Environment</em>. Vous pourrez aussi installer <code>RStudio</code> et <code>Jupyter lab</code> via l‚Äôonglet <em>Home</em> de <code>Anaconda navigator</code>. Dans l‚Äôenvironnement de base, installez le package <code>nb_conda_kernels</code> pour vous assurer que tous les noyaux (R, Python, etc.) install√©s dans les environnements de travail soient automatiquement accessibles dans Jupyter. Si vous d√©sirez utiliser dans Jupyter la version de R install√©e avec l‚Äôinstallation classique, r√©f√©rez-vous au guide pr√©sent√© <a href="#extra-jupyter">en extra au bas de la page</a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-R-anaconda" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/02_anaconda-navigator.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.7: Anaconda navigator.</figcaption></figure>
</div>
</div>
</div>
<p><a href="https://jupyter.org/"><em>Jupyter lab</em></a> est une interface notebook semblable √† <em>Quarto</em> - les format <em>Jupyter</em> (<code>*.ipynb</code>) et <em>Quarto</em> (<code>*.qmd</code>) sont par ailleurs convertibles gr√¢ce au module <a href="https://jupytext.readthedocs.io/en/latest/formats-markdown.html">jupytext</a>. L‚Äôutilisation de R en Anaconda n‚Äôest pas tout √† fait au point, et pourrait poser probl√®me pour l‚Äôinstallation de certains modules. Si vous optez pour cette option, pr√©parez-vous √† avoir √† bidouiller un peu. Plusieurs pr√©f√®rent Jupyter √† RStudio (ce n‚Äôest pas mon cas).</p>
</section><section id="utilisation-infonuagique" class="level3" data-number="2.3.3"><h3 data-number="2.3.3" class="anchored" data-anchor-id="utilisation-infonuagique">
<span class="header-section-number">2.3.3</span> Utilisation infonuagique</h3>
<p>Pas besoin d‚Äôavoir une machine super puissante pour travailler en R. Il existe <a href="https://github.com/markusschanta/awesome-jupyter#hosted-notebook-solutions">une multitude de services infonuagiques</a> (dans le <em>cloud</em>) vous permettant de lancer vos calculs sur des serveurs plut√¥t que sur votre Chromebook ou votre vieux laptop d√©glingu√©. Certains services sont gratuits, et d‚Äôautres souvent plus √©labor√©s sont payants. Vous pouvez utiliser gratuitement <a href="https://notebooks.azure.com">Azure Notebooks</a> ou un <a href="https://stackoverflow.com/a/54595286">tour de passe-passe</a> pour faire fonctionner Google colab en R. Une option gratuite de <a href="https://cocalc.com/">CoCalc</a> vient avec un agressant bandeau rouge vif qui disparait avec l‚Äôoption payante.</p>
<p>√Ä mon avis, le service <a href="https://nextjournal.com"><strong>Nextjournal</strong></a> est celui d‚Äôentre tous qui poss√®de en ce moment les meilleures qualit√©s dans sa version gratuite. Vous pourrez y travailler en mode collaboratif, comme dans Google docs. En outre, vous pouvez lancer ces notes de cours en les important dans Nextjournal. Vous devrez toutefois d√©poser les donn√©es dans l‚Äôinterface, puis √† chaque session installer les modules sp√©cialis√©s. Le service gratuit offre peu de puissance de calcul, mais pour effectuer les applications de base, √ßa devrait √™tre suffisant. La vid√©o ci-dessous monter comment importer les notes de cours dans Nextjournal.</p>
<p><video src="videos/nextjournal.webm" class="img-fluid" controls=""><a href="videos/nextjournal.webm">Video</a></video></p>
</section></section><section id="premiers-pas-avec-r" class="level2" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="premiers-pas-avec-r">
<span class="header-section-number">2.4</span> Premiers pas avec R</h2>
<p>R ne fonctionne pas avec des menus, en faisant danser une souris sous une musique de clics. Vous devrez donc entrer des commandes avec votre clavier, que vous apprendrez par c≈ìur au fur et √† mesure, ou que vous retrouverez en lan√ßant des recherches sur internet. Par exp√©rience personnelle, lorsque je travaille avec R, j‚Äôai toujours un navigateur ouvert pr√™t √† recevoir une question.</p>
<p>Les √©tapes qui suivent sont des premiers pas. Elles ne feront pas de vous des <em>ceintures noires</em> de la programmation. La plupart des utilisateurs de R ont appris en se pratiquant sur leurs donn√©es, en se butant sur des obstacles, en apprenant comment les surmonter ou les contourner‚Ä¶</p>
<p>Pour l‚Äôinstant, ouvrez seulement un interpr√©teur de commande, et lancez R. Voyons si R est aussi libre qu‚Äôon le pr√©tend.</p>
<blockquote class="blockquote">
<p>‚ÄúLa libert√©, c‚Äôest la libert√© de dire que deux et deux font quatre. Si cela est accord√©, tout le reste suit.‚Äù - George Orwell, 1984</p>
</blockquote>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">2</span> <span class="op">+</span> <span class="fl">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>Et voil√†.</p>
<p><img width="200" src="images/02_braveheart224.png"></p>
<p>Les op√©rations math√©matiques sont effectu√©es telles que l‚Äôon devrait s‚Äôattendre.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">67.1</span> <span class="op">-</span> <span class="fl">43.3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23.8</code></pre>
</div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">2</span> <span class="op">*</span> <span class="fl">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">1</span> <span class="op">/</span> <span class="fl">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5</code></pre>
</div>
</div>
<p>L‚Äôexposant peut √™tre not√© <code>^</code>, comme c‚Äôest le cas dans <em>Excel</em>, ou <code>**</code> comme c‚Äôest le cas en Python.</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">2</span><span class="op">^</span><span class="fl">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">2</span><span class="op">**</span><span class="fl">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">1</span> <span class="op">/</span> <span class="fl">2</span> <span class="co"># utilisez des espaces de part et d'autre des op√©rateurs (sauf pour l'exposant) pour √©claircir le code</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5</code></pre>
</div>
</div>
<p>R ne lit pas ce qui suit le caract√®re <code>#</code>. Cela vous laisse l‚Äôopportunit√© de commenter un code comprenant une s√©quence de plusieurs lignes. Remarquez √©galement que la derni√®re op√©ration comporte des espaces entre les nombres et l‚Äôop√©rateur <code>/</code>. Dans ce cas (ce n‚Äôest pas toujours le cas), les espaces ne signifient rien: ils aident seulement √† √©claircir le code. Il existe des guides pour l‚Äô√©criture de code en R. Je recommande <strong>fortement</strong> de suivre <strong>m√©ticuleusement</strong> le guide de style de <a href="https://style.tidyverse.org">tidyverse</a>.</p>
<p>Assigner des objets √† des variables est fondamental en programmation. En R, on assigne traditionnellement avec la fl√®che <code>&lt;-</code>, mais vous verrez parfois le <code>=</code>, qui est davantage utilis√© comme standard dans d‚Äôautres langages de programmation. Par exemple.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Truc</strong>. Essayez d‚Äôinverser la fl√®che, e.g.&nbsp;<code>3 -&gt; a</code>.</p>
<p>Techniquement, <code>a</code> pointe vers le nombre entier 3. Cons√©quemment, on peut effectuer des op√©rations sur <code>a</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a</span> <span class="op">*</span> <span class="fl">6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">A</span> <span class="op">+</span> <span class="fl">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Le message d‚Äôerreur nous dit que <code>A</code> n‚Äôest pas d√©fini. Sa version minuscule, <code>a</code>, l‚Äôest pourtant. La raison est que R consid√®re la <em>case</em> dans la d√©finition des objets. Utiliser la mauvaise case m√®ne donc √† des erreurs.</p>
<p><strong>Note</strong>. Les messages d‚Äôerreur ne sont pas toujours clairs, mais vous apprendrez √† les comprendre. Dans tous les cas, ils sont fait pour vous aider. Lisez-les attentivement!</p>
<p>En g√©n√©ral, le nom d‚Äôune variable doit toujours commencer par une lettre, et ne doit pas contenir de caract√®res r√©serv√©s (espaces, <code>+</code>, <code>*</code>). Dans la d√©finition des variables, plusieurs utilisent des symboles <code>.</code> pour d√©limiter les mots, mais la barre de soulignement <code>_</code> est √† pr√©f√©rer. En effet, dans d‚Äôautres langages de programmation comme Python, le <code>.</code> a une autre signification: son utilisation est √† √©viter autant que possible. De m√™me, √©vitez l‚Äôutilisation de majuscules pour nommer vos objets (voir le guide de style de <a href="https://style.tidyverse.org/syntax.html#object-names">tidyverse</a> pour nommer les objets).</p>
<p><strong>Note</strong>. √Ä ce stade, vous serez probablement plus √† l‚Äôaise de copier-coller ces commandes dans votre terminal.</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">rendement_arbre</span> <span class="op">&lt;-</span> <span class="fl">50</span> <span class="co"># pomme/arbre</span></span>
<span><span class="va">nombre_arbre</span> <span class="op">&lt;-</span> <span class="fl">300</span> <span class="co"># arbre</span></span>
<span><span class="va">nombre_pomme</span> <span class="op">&lt;-</span> <span class="va">rendement_arbre</span> <span class="op">*</span> <span class="va">nombre_arbre</span></span>
<span><span class="va">nombre_pomme</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15000</code></pre>
</div>
</div>
<p>Comme chez la plupart des langages de programmation, R respecte les conventions des <a href="https://fr.wikipedia.org/wiki/Ordre_des_op%C3%A9rations">priorit√©s des op√©rations math√©atiques</a>.</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">10</span> <span class="op">-</span> <span class="fl">9</span><span class="op">^</span><span class="fl">0.5</span> <span class="op">*</span> <span class="fl">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<section id="types-de-donn√©es" class="level3" data-number="2.4.1"><h3 data-number="2.4.1" class="anchored" data-anchor-id="types-de-donn√©es">
<span class="header-section-number">2.4.1</span> Types de donn√©es</h3>
<p>Jusqu‚Äô√† maintenant, nous n‚Äôavons utilis√© que des <strong>nombres entiers</strong> (<em>integer</em> ou <code>int</code>) et des <strong>nombres r√©els</strong> (<em>numeric</em> ou <code>float64</code>). R inclut d‚Äôautres types. La <strong>cha√Æne de caract√®re</strong> (<em>string</em> ou <em>character</em>) contient un ou plusieurs symboles. Elle est d√©finie entre des doubles guillemets <code>" "</code> ou des apostrophes <code>' '</code>. Il n‚Äôexiste pas de standard sur l‚Äôutilisation de l‚Äôun ou de l‚Äôautre, mais en r√®gle g√©n√©rale, on utilise les apostrophes pour les expressions courtes, contenant un simple mot ou une s√©quence de lettres, et les guillemets pour les phrases. Une raison pour cela: les guillemets sont utiles pour ins√©rer des apostrophes dans une cha√Æne de caract√®re.</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="st">"L'ours"</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="st">"polaire"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "L'ours polaire"</code></pre>
</div>
</div>
<p>On <em>colle</em> <code>a</code> et <code>b</code> avec la fonction <code>paste</code>. Notez que l‚Äôobjet <code>a</code> a √©t√© d√©fini pr√©c√©demment. Il est possible en R de r√©assigner une variable, mais cela peut porter √† confusion, jusqu‚Äô√† g√©n√©rer des erreurs de calcul si une variable n‚Äôest pas assign√©e √† l‚Äôobjet auquel on voulait r√©f√©rer.</p>
<p>Combien de caract√®res contient la cha√Æne <code>"L'ours polaire"</code>? R sait compter. Demandons-lui.</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14</code></pre>
</div>
</div>
<p>Quatorze, c‚Äôest bien cela (comptez ‚ÄúL‚Äôours polaire‚Äù, en incluant l‚Äôespace). Comme <code>paste</code>, <code>nchar</code> est une fonction incluse par d√©faut dans l‚Äôenvironnement de travail de R: plus pr√©cis√©ment, ces fonctions sont incluses dans le module <code>base</code>, inclut par d√©faut lorsque R est lanc√©. La fonction est appel√©e en √©crivant <code><a href="https://rdrr.io/r/base/nchar.html">nchar()</a></code>. Mais une fonction de quoi? Des <em>arguments</em>, qui se trouvent entre les parenth√®ses. Dans ce cas, il y a un seul argument: <code>c</code>.</p>
<p>En calcul scientifique, il est courant de lancer des requ√™tes d√©terminant si un r√©sultat est vrai ou faux.</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">17</span></span>
<span><span class="va">a</span> <span class="op">&lt;</span> <span class="fl">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a</span> <span class="op">&gt;</span> <span class="fl">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a</span> <span class="op">==</span> <span class="fl">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a</span> <span class="op">!=</span> <span class="fl">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a</span> <span class="op">==</span> <span class="fl">17</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">!</span><span class="op">(</span><span class="va">a</span> <span class="op">==</span> <span class="fl">17</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Je viens d‚Äôintroduire un nouveau type de donn√©e: les donn√©es bool√©ennes (<em>boolean</em>, ou <code>logical</code>), qui ne peuvent prendre que deux √©tats - <code>TRUE</code> ou <code>FALSE</code>. En m√™me temps, j‚Äôai utilis√© la fonction <code>print</code> parce que dans mon carnet, seule la derni√®re op√©ration permet d‚Äôafficher le r√©sultat. Si l‚Äôon veut forcer une sortie, on utilise <code>print</code>. Puis, on a vu plus haut que le symbole <code>=</code> est r√©serv√© pour assigner des objets: pour les tests d‚Äô√©galit√©, on utilise le double √©gal, <code>==</code>, ou <code>!=</code> pour la non-√©galit√©. Enfin, pour inverser une donn√©e de type bool√©enne, on utilise le point d‚Äôexclamation <code>!</code>.</p>
</section><section id="les-collections-de-donn√©es" class="level3" data-number="2.4.2"><h3 data-number="2.4.2" class="anchored" data-anchor-id="les-collections-de-donn√©es">
<span class="header-section-number">2.4.2</span> Les collections de donn√©es</h3>
<p>Les exercices pr√©c√©dents ont permis de pr√©senter les types de donn√©es offerts par d√©faut sur R qui sont les plus importants pour le calcul scientifique: <code>int</code> (<em>integer</em>, ou nombre entier), <code>numeric</code> (nombre r√©el), <code>character</code> (<em>string</em>, ou cha√Æne de caract√®re) et <code>logical</code> (bool√©en). D‚Äôautres s‚Äôajouteront tout au long du cours, comme les cat√©gories (<code>factor</code>) et les unit√©s de temps (date-heure).</p>
<p>Lorsque l‚Äôon proc√®de √† des op√©rations de calcul en science, nous utilisons rarement des valeurs uniques. Nous pr√©f√©rons les organiser et les traiter en collections. Par d√©faut, R offre quatre types importants de collections: les <strong>vecteurs</strong>, les <strong>matrices</strong>, les <strong>listes</strong> et les <strong>tableaux</strong>.</p>
<section id="vecteurs" class="level4" data-number="2.4.2.1"><h4 data-number="2.4.2.1" class="anchored" data-anchor-id="vecteurs">
<span class="header-section-number">2.4.2.1</span> Vecteurs</h4>
<p>D‚Äôabord, les <strong>vecteurs</strong> sont une s√©rie de variables de m√™me type. Un vecteur est d√©limit√© par la fonction <code><a href="https://rdrr.io/r/base/c.html">c( )</a></code> (<code>c</code> pour <strong>c</strong>oncat√©nation). Les √©l√©ments de la liste sont s√©par√©s par des virgules.</p>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">espece</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Petromyzon marinus"</span>, <span class="st">"Lepisosteus osseus"</span>, <span class="st">"Amia calva"</span>, <span class="st">"Hiodon tergisus"</span><span class="op">)</span></span>
<span><span class="va">espece</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Petromyzon marinus" "Lepisosteus osseus" "Amia calva"        
[4] "Hiodon tergisus"   </code></pre>
</div>
</div>
<p>Pour acc√©der aux √©l√©ments d‚Äôune liste, one appelle la liste suivie de la position de l‚Äôobjet d√©sir√© entre crochets.</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">espece</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Petromyzon marinus"</code></pre>
</div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">espece</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Lepisosteus osseus"</code></pre>
</div>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">espece</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Petromyzon marinus" "Lepisosteus osseus" "Amia calva"        </code></pre>
</div>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">espece</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Petromyzon marinus" "Amia calva"        </code></pre>
</div>
</div>
<p>On peut noter que le premier √©l√©ment de la liste est not√© <code>1</code>, et non <code>0</code> comme c‚Äôest le cas de la plupart de langages. Le raccourcis <code>1:3</code> cr√©e une liste de nombres entiers de <code>1</code> √† <code>3</code> inclusivement, c‚Äôest-√†-dire l‚Äô√©quivalent de <code>c(1, 2, 3)</code>. En effet, on cr√©e une liste d‚Äôindices pour soutirer des √©l√©ments d‚Äôune liste. On peut utiliser le symbole de soustraction pour retirer un ou plusieurs √©l√©ments d‚Äôun vecteur.</p>
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">espece</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Lepisosteus osseus" "Hiodon tergisus"   </code></pre>
</div>
</div>
<p>Pour ajouter un √©l√©ment √† notre liste, on peut utiliser la fonction <code><a href="https://rdrr.io/r/base/c.html">c( )</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">espece</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">espece</span>, <span class="st">"Cyprinus carpio"</span><span class="op">)</span></span>
<span><span class="va">espece</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Petromyzon marinus" "Lepisosteus osseus" "Amia calva"        
[4] "Hiodon tergisus"    "Cyprinus carpio"   </code></pre>
</div>
</div>
<p>Notez que l‚Äôon efface l‚Äôobjet <code>espece</code> par une concat√©nation de l‚Äôobjet <code>espece</code>, pr√©c√©demment d√©finie, et d‚Äôun autre √©l√©ment.</p>
<p>En lan√ßant <code>espece[3] &lt;- "Lepomis gibbosus"</code>, il est possible de changer un √©l√©ment de la liste.</p>
<div class="cell">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">espece</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Lepomis gibbosus"</span></span>
<span><span class="va">espece</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Petromyzon marinus" "Lepisosteus osseus" "Lepomis gibbosus"  
[4] "Hiodon tergisus"    "Cyprinus carpio"   </code></pre>
</div>
</div>
</section><section id="matrices" class="level4" data-number="2.4.2.2"><h4 data-number="2.4.2.2" class="anchored" data-anchor-id="matrices">
<span class="header-section-number">2.4.2.2</span> Matrices</h4>
<p>Une <strong>matrice</strong> est un vecteur de dimension plus √©lev√©e que 1. En √©cologie, on d√©passe rarement la deuxi√®me dimension, quoi que les matrices en <code>N</code> dimensions soient courantes en mod√©lisation math√©matique. Je ne consid√©rerai pour le moment que des matrices <code>2D</code>. Comme c‚Äôest la cas des vecteurs, les matrices contiennent des valeurs de m√™me type. En R, on peut attribuer aux matrices <code>2D</code> des noms de ligne et de colonne.</p>
<div class="cell">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span>, </span>
<span>              ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">mat</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    5    9
[2,]    2    6   10
[3,]    3    7   11
[4,]    4    8   12</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">mat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">mat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"site_1"</span>, <span class="st">"site_2"</span>, <span class="st">"site_3"</span>, <span class="st">"site_4"</span><span class="op">)</span></span>
<span><span class="va">mat</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       A B  C
site_1 1 5  9
site_2 2 6 10
site_3 3 7 11
site_4 4 8 12</code></pre>
</div>
</div>
<p>On peut soutirer les noms de colonne et les noms de ligne. Le r√©sultat est un vecteur.</p>
<div class="cell">
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">mat</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A" "B" "C"</code></pre>
</div>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">mat</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "site_1" "site_2" "site_3" "site_4"</code></pre>
</div>
</div>
</section><section id="listes" class="level4" data-number="2.4.2.3"><h4 data-number="2.4.2.3" class="anchored" data-anchor-id="listes">
<span class="header-section-number">2.4.2.3</span> Listes</h4>
<p>Les <strong>listes</strong> sont des collections h√©t√©rog√®nes dans lesquelles on peut placer les objets d√©sir√©s, sans distinction: elles peuvent m√™me inclure d‚Äôautres listes. Chacun des √©l√©ments de la liste peut √™tre identifi√© par une cl√©.</p>
<div class="cell">
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ma_liste</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  especes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Petromyzon marinus"</span>, <span class="st">"Lepisosteus osseus"</span>,</span>
<span>    <span class="st">"Amia calva"</span>, <span class="st">"Hiodon tergisus"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  site <span class="op">=</span> <span class="st">"A101"</span>,</span>
<span>  stations_meteos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"746583"</span>, <span class="st">"783786"</span>, <span class="st">"856363"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">ma_liste</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$especes
[1] "Petromyzon marinus" "Lepisosteus osseus" "Amia calva"        
[4] "Hiodon tergisus"   

$site
[1] "A101"

$stations_meteos
[1] "746583" "783786" "856363"</code></pre>
</div>
</div>
<p>Les √©l√©ments de la liste peuvent √™tre soutir√©s par le nom de la cl√© ou par l‚Äôindice, de cette mani√®re.</p>
<div class="cell">
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ma_liste</span><span class="op">$</span><span class="va">especes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Petromyzon marinus" "Lepisosteus osseus" "Amia calva"        
[4] "Hiodon tergisus"   </code></pre>
</div>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ma_liste</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Petromyzon marinus" "Lepisosteus osseus" "Amia calva"        
[4] "Hiodon tergisus"   </code></pre>
</div>
</div>
<p><strong>Exercice</strong>. Acc√©der au deuxi√®me √©l√©ment du vecteur d‚Äôesp√®ces dans la liste ma_liste.</p>
</section><section id="tableaux" class="level4" data-number="2.4.2.4"><h4 data-number="2.4.2.4" class="anchored" data-anchor-id="tableaux">
<span class="header-section-number">2.4.2.4</span> Tableaux</h4>
<p>Enfin, le type de collection de donn√©es le plus important est le tableau, ou <code>data.frame</code>. Techniquement, il s‚Äôagit d‚Äôune liste compos√©e de vecteurs de m√™me longueur. Chaque colonne peut ainsi prendre un type de donn√©e ind√©pendamment des autres colonnes.</p>
<div class="cell">
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tableau</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  espece <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Petromyzon marinus"</span>, <span class="st">"Lepisosteus osseus"</span>,</span>
<span>    <span class="st">"Amia calva"</span>, <span class="st">"Hiodon tergisus"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  poids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">13</span>, <span class="fl">21</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  longueur <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">35</span>, <span class="fl">44</span>, <span class="fl">50</span>, <span class="fl">8</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">tableau</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              espece poids longueur
1 Petromyzon marinus    10       35
2 Lepisosteus osseus    13       44
3         Amia calva    21       50
4    Hiodon tergisus     4        8</code></pre>
</div>
</div>
<p>En programmation classique en R (nous verrons plus loin la m√©thode <code>tidyverse</code>), les √©l√©ments d‚Äôun tableau se manipulent comme ceux d‚Äôune matrice et les colonnes peuvent √™tre appel√©s comme les √©l√©ments d‚Äôune liste.</p>
<div class="cell">
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tableau</span><span class="op">[</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  poids longueur
1    10       35
2    13       44
3    21       50
4     4        8</code></pre>
</div>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tableau</span><span class="op">$</span><span class="va">poids</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 13 21  4</code></pre>
</div>
</div>
<p>Vous verrez aussi, quoi que rarement, ce format, qui √† la diff√©rence du format <code>$</code> g√©n√®re un tableau.</p>
<div class="cell">
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tableau</span><span class="op">[</span><span class="st">"poids"</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  poids
1    10
2    13
3    21
4     4</code></pre>
</div>
</div>
<p>Le tableau est le format de collection √† privil√©gier pour manipuler des donn√©es. R√©cemment, le format de tableau <code>tibble</code> a √©t√© cr√©√© par l‚Äô√©quipe de RStudio pour offrir un format plus moderne.</p>
</section></section><section id="les-fonctions" class="level3" data-number="2.4.3"><h3 data-number="2.4.3" class="anchored" data-anchor-id="les-fonctions">
<span class="header-section-number">2.4.3</span> Les fonctions</h3>
<p>Lorsque vous √©crivez une commande suivit de parenth√®ses, comme <code>data.frame(especes = ...)</code>, vous demandez √† R de passer √† l‚Äôaction en appelant une fonction. De mani√®re tr√®s g√©n√©rale, une fonction transforme quelque chose en quelque chose d‚Äôautre (<a href="#fig-intro-fonction">Figure&nbsp;<span>2.8</span></a>).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-intro-fonction" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/02_fonctions_io_.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.8: Sch√©ma simplifi√© d‚Äôune fonction.</figcaption></figure>
</div>
</div>
</div>
<p>Par exemple, la fonction <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> prend une collection de nombre comme entr√©e, puis en sort vous devinez quoi.</p>
<div class="cell">
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">tableau</span><span class="op">$</span><span class="va">poids</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12</code></pre>
</div>
</div>
<p>Les entr√©es sont appel√©s les <strong>arguments</strong> de la fonction. Leur d√©finition est toujours disponible dans la documentation.</p>
<p><strong>Exercice</strong>. Familiarisez-vous avec la documentation de R en lan√ßant <code><a href="https://rdrr.io/r/base/mean.html">?mean</a></code>. Truc: si vous avez pris de l‚Äôavance et que vous travaillez d√©j√† en RStudio, mettez le terme en surbrillance, puis appuyez sur F1.</p>
<p>Vous verrez dans la documentation que la fonction <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> demande trois arguments, <code>x</code>, <code>trim</code> et <code>na.rm</code>. Or nous avons seulement plac√© un vecteur, sans sp√©cifier d‚Äôargument!</p>
<p>En effet. En l‚Äôabsence d‚Äôune d√©finition des arguments, R supposera que les arguments dans la parenth√®se, s√©par√©s par une virgule, sont pr√©sent√©s dans le m√™me ordre que celui sp√©cifi√© dans la d√©finition de la fonction (celle qui est pr√©sent√©e dans le fichier d‚Äôaide). Dans le cas qui nous int√©resse, <code>mean(tableau$poids)</code> est √©quivalent √† <code>mean(x = tableau$poids)</code>.</p>
<p>Maintenant, selon la fiche d‚Äôaide, l‚Äôargument <code>na.rm</code> est un valeur logique sp√©cifiant si oui (<code>TRUE</code>) ou non (<code>FALSE</code>) les valeurs manquantes doivent √™tre consid√©r√©es (une moyenne d‚Äôun vecteur comprenant au moins un <code>NA</code> sera de <code>NA</code>). En ne sp√©cifiant rien, R prend la valeur par d√©faut, telle que sp√©cifi√©e dans la documentation. Il en va de m√™me pour l‚Äôargument <code>trim</code>, qui permet d‚Äô√©laguer des valeurs extr√™mes. Dans la fiche d‚Äôaide, <code>mean(x, trim = 0, na.rm = FALSE, ...)</code> signifie que par d√©faut, l‚Äôargument <code>x</code> est vide (il doit donc √™tre sp√©cifi√©), l‚Äôargument <code>trim</code> est de 0 et l‚Äôargument <code>na.rm</code> est <code>FALSE</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">1</span>, <span class="fl">7</span>, <span class="fl">4</span>, <span class="fl">9</span>, <span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">1</span>, <span class="fl">7</span>, <span class="fl">4</span>, <span class="fl">9</span>, <span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.666667</code></pre>
</div>
</div>
<p>Vous n‚Äô√™tes pas emprisonn√© par les fonctions offertes par R. Vous pouvez installer des modules qui compl√®tent les fonctions de base de R: on le verra un peu plus loin dans ce chapitre. Mais pour l‚Äôinstant, voyons comment vous pouvez cr√©er vos propres fonctions. Disons que vous voulez cr√©er une fonction qui calcule la sortie de <span class="math inline">\(x^3-2y+a\)</span>. Pour obtenir la r√©ponse, on a besoin des arguments <code>x</code>, <code>y</code> et <code>a</code>. La sortie de la fonction est ici triviale: la r√©ponse de l‚Äô√©quation. L‚Äôop√©ration <code>function</code> permet de prendre √ßa en charge.</p>
<div class="cell">
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">operation_f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">a</span> <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">x</span><span class="op">^</span><span class="fl">3</span> <span class="op">-</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">y</span> <span class="op">+</span> <span class="va">a</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notez que <code>a</code> a une valeur par d√©faut. La sortie de la fonction est ce qui se trouve entre les parenth√®ses de <code>return</code>. Vous pouvez maintenant utiliser la fonction operation_f au besoin.</p>
<div class="cell">
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">operation_f</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">2</span>, y <span class="op">=</span> <span class="fl">3</span>, a <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>Une telle fonction est peu utile. Mais l‚Äôutilisation de fonctions personnalis√©es vous permettra d‚Äô√©viter de r√©p√©ter la m√™me op√©ration plusieurs fois dans un flux de travail, en √©vitant de g√©n√©rer trop de code, donc aussi de potentielles erreurs. Personnellement, j‚Äôutilise les fonctions surtout pour g√©n√©rer des graphiques personnalis√©s.</p>
<p><strong>Exercice</strong>. Afin d‚Äôacqu√©rir de l‚Äôautonomie, vous devrez √™tre en mesure de trouver le nom des commandes dont vous avez besoin pour effectuer la t√¢che que vous d√©sirez effectuer. Cela peut causer des frustrations, mais vous vous sentirez toujours plus √† l‚Äôaise avec R jour apr√®s jour. L‚Äôexercice ici est de trouver par vous-m√™me la commande qui vous permettra mesurer la longueur d‚Äôun vecteur.</p>
</section><section id="les-boucles" class="level3" data-number="2.4.4"><h3 data-number="2.4.4" class="anchored" data-anchor-id="les-boucles">
<span class="header-section-number">2.4.4</span> Les boucles</h3>
<p>Les boucles permettent d‚Äôeffectuer une m√™me suite d‚Äôop√©rations sur plusieurs objets. Pour faire suite √† notre exemple, nous d√©sirons obtenir le r√©sultat de l‚Äôop√©ration <em>f</em> pour des param√®tres que nous enregistrons dans ce tableau.</p>
<div class="cell">
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">8</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">1</span>, <span class="fl">8</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">params</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x y a
1 2 3 6
2 4 4 1
3 1 8 8
4 5 1 2
5 6 0 5</code></pre>
</div>
</div>
<p>Nous cr√©ons un vecteur vide, puis nous effectuons une it√©ration ligne par ligne en remplissant le vecteur.</p>
<div class="cell">
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">operation_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">params</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">operation_res</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">operation_f</span><span class="op">(</span>x <span class="op">=</span> <span class="va">params</span><span class="op">[</span><span class="va">i</span>, <span class="fl">1</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">params</span><span class="op">[</span><span class="va">i</span>, <span class="fl">2</span><span class="op">]</span>, a <span class="op">=</span> <span class="va">params</span><span class="op">[</span><span class="va">i</span>, <span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">operation_res</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]   8  57  -7 125 221</code></pre>
</div>
</div>
<p>En faisant varier <code>i</code> sur des valeurs du vecteur donn√© par la s√©quence de nombres entiers de 1 au nombre de ligne du tableau de param√®tres, nous demandons √† R d‚Äôeffectuer la suite d‚Äôop√©ration entre les accolades <code><a href="https://rdrr.io/r/base/Paren.html">{}</a></code>. √Ä chaque boucle, <code>i</code> prend une valeur de la s√©quence. <code>i</code> est utilis√© ici comme indice de la ligne √† soutirer du tableau <code>params</code>, qui correspond √† l‚Äôindice dans le vecteur operation_res.</p>
<p>Ainsi, chaque r√©sultat est calcul√© dans l‚Äôordre des lignes du tableau de param√®tres et l‚Äôon pourra tr√®s bien y coller nos r√©sultats:</p>
<div class="cell">
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">params</span><span class="op">$</span><span class="va">resultats</span> <span class="op">&lt;-</span> <span class="va">operation_res</span></span>
<span><span class="va">params</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x y a resultats
1 2 3 6         8
2 4 4 1        57
3 1 8 8        -7
4 5 1 2       125
5 6 0 5       221</code></pre>
</div>
</div>
<p>Notez que puisque la colonne <code>resultat</code> n‚Äôexiste pas dans le tableau <code>params</code>, R cr√©e automatiquement une nouvelle colonne.</p>
<p>Les boucles <code>for</code> vous permettront par exemple de g√©n√©rer en peu de temps 10, 100, 1000 graphiques (autant que vous voulez), chacun issu de simulations obtenues √† partir de conditions initiales diff√©rentes, et de les enregistrer dans un r√©pertoire sur votre ordinateur. Un travail qui pourrait prendre des semaines sur Excel peut √™tre effectu√© en R en quelques secondes.</p>
<p>Un second outil est disponible pour les it√©rations: les boucles <strong><code>while</code></strong>. Elles effectuent une op√©ration tant qu‚Äôun crit√®re n‚Äôest pas atteint. Elles sont utiles pour les op√©rations o√π l‚Äôon cherche une convergence. Je les couvre rapidement puisqu‚Äôelles sont rarement utilis√©es dans les flux de travail courants. En voici un petit exemple.</p>
<div class="cell">
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">100</span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">1.1</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10
[1] 3.162278
[1] 1.778279
[1] 1.333521
[1] 1.154782
[1] 1.074608</code></pre>
</div>
</div>
<p>Nous avons initi√© x √† une valeur de 100. Puis, tant que (<code>while</code>) le test <code>x &gt; 1.1</code> est vrai, attribuer √† <code>x</code> la nouvelle valeur calcul√©e en extrayant la racine de la valeur pr√©c√©dente de <code>x</code>. Enfin, indiquer la valeur avec <code>print</code>.</p>
</section><section id="conditions-if-else-if-else" class="level3" data-number="2.4.5"><h3 data-number="2.4.5" class="anchored" data-anchor-id="conditions-if-else-if-else">
<span class="header-section-number">2.4.5</span> Conditions: <code>if</code>, <code>else if</code>, <code>else</code>
</h3>
<blockquote class="blockquote">
<p>Si la condition 1 est remplie, effectuer une suite d‚Äôinstructions 1. Si la condition 1 n‚Äôest pas remplie, et si la condition 2 est remplie, effectuer la suite d‚Äôinstructions 2. Sinon, effectuer la suite d‚Äôinstruction 3.</p>
</blockquote>
<p>Voil√† comment on exprime une suite de conditions. Prenons l‚Äôexemple simple d‚Äôune discr√©tisation d‚Äôune valeur continue. Si <span class="math inline">\(x&lt;10\)</span>, il est class√© comme faible. Si <span class="math inline">\(10 \leq x &lt;20\)</span>, il est class√© comme moyen. Si <span class="math inline">\(x \geq 20\)</span>, il est class√© comme √©lev√©. Pla√ßons cette classification dans une fonction.</p>
<div class="cell">
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">classification</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">lim1</span> <span class="op">=</span> <span class="fl">10</span>, <span class="va">lim2</span> <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="va">lim1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">categorie</span> <span class="op">&lt;-</span> <span class="st">"faible"</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="va">lim2</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">categorie</span> <span class="op">&lt;-</span> <span class="st">"moyen"</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">categorie</span> <span class="op">&lt;-</span> <span class="st">"√©lev√©"</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">categorie</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">classification</span><span class="op">(</span><span class="op">-</span><span class="fl">10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "faible"</code></pre>
</div>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">classification</span><span class="op">(</span><span class="fl">15.4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "moyen"</code></pre>
</div>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">classification</span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "√©lev√©"</code></pre>
</div>
</div>
<p>Une condition est d√©finie avec le <code>if</code>, suivi du test √† vrai ou faux entre parenth√®ses. Si le test retourne un <em>vrai</em> (<code>TRUE</code>), l‚Äôinstruction entre accolades est ex√©cut√©e. Si elle est fausse, on passe au suivant.</p>
<p><strong>Exercice</strong>. Explorer les commandes <code>ifelse</code> et <code>cut</code> et r√©fl√©chissez √† la mani√®re qu‚Äôelles pourraient √™tre utilis√©es pour effectuer une discr√©tisation plus efficacement qu‚Äôavec les <code>if</code> et les <code>else</code>.</p>
</section><section id="installer-et-charger-un-module" class="level3" data-number="2.4.6"><h3 data-number="2.4.6" class="anchored" data-anchor-id="installer-et-charger-un-module">
<span class="header-section-number">2.4.6</span> Installer et charger un module</h3>
<p>La plupart des op√©rations d‚Äôordre g√©n√©ral (comme les racines carr√©es, les tests statistiques, la gestion de matrices et de tableau, les graphiques, etc.) sont accessibles gr√¢ce aux modules de base de R, qui sont install√©s et charg√©s par d√©faut lors du d√©marrage de R. Des √©quipes de travail ont n√©anmoins d√©velopp√© plusieurs modules pour r√©pondre √† leurs besoins sp√©cialis√©s, et les ont laiss√©s disponibles au grand public dans des modules que vous pouvez installer d‚Äôun d√©p√¥t CRAN (le AppStore de R), d‚Äôun d√©p√¥t Anaconda (le AppStore de Anaconda, si vous utilisez cette plate-forme), d‚Äôun d√©p√¥t Github (d√©p√¥ts d√©centralis√©s), etc.</p>
<p>RStudio poss√®de un pratique bouton <em>Install</em> qui vous permet d‚Äôy inscrire une liste de modules. Le navigateur anaconda offre aussi une interface d‚Äôinstallation. La commande R pour installer un module est <code>install.packages("ggplot2")</code>, si par exemple vous d√©sirez installer <code>ggplot2</code>, le module graphique par excellence en R. C‚Äôest la commande que RStudio lancera tout seul si vous lui demandez d‚Äôinstaller <code>ggplot2</code>.</p>
<p>Les modules sont l‚Äô√©quivalent des applications sp√©cialis√©es que vous installez sur un t√©l√©phone mobile. Pour les utiliser, il faut les ouvrir.</p>
<p>G√©n√©ralement, j‚Äôouvre toutes les applications n√©cessaires √† mon flux de travail au tout d√©but de ma feuille de calcul (la prochaine cellule retournera un message d‚Äôerreur si les packages ne sont pas install√©s).</p>
<div class="cell">
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org">"tidyverse"</a></span><span class="op">)</span> <span class="co"># m√©ta-package qui charge entre autres dplyr et ggplot2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ
‚úî dplyr     1.1.3     ‚úî readr     2.1.4
‚úî forcats   1.0.0     ‚úî stringr   1.5.0
‚úî ggplot2   3.4.4     ‚úî tibble    3.2.1
‚úî lubridate 1.9.3     ‚úî tidyr     1.3.0
‚úî purrr     1.0.2     
‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ
‚úñ dplyr::filter() masks stats::filter()
‚úñ dplyr::lag()    masks stats::lag()
‚Ñπ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/vegandevs/vegan">"vegan"</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Le chargement a n√©cessit√© le package : permute
Le chargement a n√©cessit√© le package : lattice
This is vegan 2.6-4</code></pre>
</div>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://svn.r-project.org/R-packages/trunk/nlme/">"nlme"</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attachement du package : 'nlme'

L'objet suivant est masqu√© depuis 'package:dplyr':

    collapse</code></pre>
</div>
</div>
<p>Les modules sont install√©s sur votre ordinateur √† un endroit que vous pourrez retrouver avec la commande <code><a href="https://rdrr.io/r/base/libPaths.html">.libPaths()</a></code></p>
<p><strong>Exercice</strong>. √Ä partir d‚Äôici jusqu‚Äô√† la fin du cours, nous utiliserons RStudio. Ouvrez-le et familiarisez-vous avec l‚Äôinterface! Quelques petits trucs:</p>
<ul>
<li>pour lancer une ligne, placez votre curseur sur la ligne, puis appuyez sur Ctrl+Enter</li>
<li>pour lancer une partie de code pr√©cise, mettez le en surbrillance, puis Ctrl+Enter</li>
<li>utilisez toujours le gestionnaire de projets, en haut √† droite!</li>
<li>installez le module <strong><code>tidyverse</code></strong>
</li>
<li>lancez <code>data("iris")</code> pour obtenir un tableau d‚Äôexercice, puis cliquez sur l‚Äôobjet dans la fen√™tre environnement</li>
</ul></section></section><section id="enfin" class="level2" data-number="2.5"><h2 data-number="2.5" class="anchored" data-anchor-id="enfin">
<span class="header-section-number">2.5</span> Enfin‚Ä¶</h2>
<p>Comme une langue, on n‚Äôapprend √† s‚Äôexprimer en un langage informatique qu‚Äôen se mettant √† l‚Äô√©preuve, ce que vous ferez tout au long de ce cours. Pour vous encourager, voici quelques trucs pour apprendre √† coder en R.</p>
<ul>
<li>
<strong>R n‚Äôaime pas l‚Äôambigu√Øt√©</strong>. Une simple virgule mal plac√©e et il ne sait plus quoi faire. Cela peut √™tre frustrant au d√©but, mais cette rigidit√© est n√©cessaire pour effectuer du calcul scientifique.</li>
<li>
<strong>Le copier-coller est votre ami</strong>. En gardant √† l‚Äôesprit que vous √™tre responsable de votre code et que vous respectez les droits d‚Äôauteur, n‚Äôayez pas peur de copier-coller des lignes de code et de personnaliser par la suite.</li>
<li>
<strong>L‚Äôerreur que vous obtenez: d‚Äôautres l‚Äôont obtenue avant vous</strong>. Le site de question-r√©ponse <a href="https://stackoverflow.com/questions/tagged/r">stackoverflow</a> est une ressource inestimable o√π des gens ayant post√© des questions ont re√ßu des r√©ponses d‚Äôexperts (les meilleures r√©ponses et les meilleures questions apparaissent en premier). Apprenez √† chercher intelligemment des r√©ponses en formulant pr√©cis√©ment vos questions!</li>
<li>
<strong>√âtudiez et pratiquez</strong>. Les messages d‚Äôerreur en R sont courants, m√™me chez les personnes exp√©riment√©es. La meilleure mani√®re d‚Äôapprendre une langue est de la parler, d‚Äô√©tudier ses susceptibilit√©s, de les tester dans une conversation, etc.</li>
</ul></section><section id="petit-truc" class="level2" data-number="2.6"><h2 data-number="2.6" class="anchored" data-anchor-id="petit-truc">
<span class="header-section-number">2.6</span> Petit truc!</h2>
<p>RStudio peut √™tre impl√©ment√© avec des extensions. L‚Äôune d‚Äôelle permet d‚Äôajuster votre style de code. Par exemple, vous voulez vous assurer que toutes les allocations sont bien effectu√©es avec des <code>&lt;-</code> et non pas des <code>=</code>, qu‚Äôil y a bien des espaces de part et d‚Äôautre de <code>&lt;-</code>, que les retours de lignes sont bien plac√©s, etc. Installez le module <strong><code>styler</code></strong>, et des options appara√Ætront dans le menu <code>Addins</code> comme √† la <a href="#fig-intro-styler">Figure&nbsp;<span>2.9</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-intro-styler" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/02_styler.png" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.9: L‚Äôextension styler permet de formater votre code dans un style particulier</figcaption></figure>
</div>
</div>
</div>
</section><section id="extra-jupyter" class="level2" data-number="2.7"><h2 data-number="2.7" class="anchored" data-anchor-id="extra-jupyter">
<span class="header-section-number">2.7</span> Extra: Utiliser R avec Jupyter</h2>
<p>Pour utiliser R dans Jupyter notebook ou Jupyter lab, vous devez installer le module <strong><code>IRkernel</code></strong> dans la version de R que vous d√©sirez utiliser avec Jupyter, puis de lancer la commande <code><a href="https://rdrr.io/pkg/IRkernel/man/installspec.html">IRkernel::installspec()</a></code>. La prochaine fois que vous ouvrirez Jupyter, le noyau de R devrait appara√Ætre.</p>
<p>Je n‚Äôai aucune exp√©rience sur Mac, mais semble-t-il cela fonctionne comme en Linux. Ouvrez R √† partir d‚Äôun terminal (R + Enter), puis lancez <code><a href="https://rdrr.io/pkg/IRkernel/man/installspec.html">IRkernel::installspec()</a></code> apr√®s avoir install√© <strong><code>IRkernel</code></strong>. Si vous travaillez en Windows, il vous faudra lancer R par son chemin complet dans l‚Äôinvite de commande de Anaconda (<em>Anaconda Powershell Prompt</em>). Par exemple, ouvrir <em>Anaconda Powershell Prompt</em>, puis, si votre installation de R se trouve dans <code>C:\Program Files\R\R-3.6.2</code>,</p>
<pre><code>(base) PS C:\Users\fifi&gt; cd "C:\Program Files\R\R-3.6.2\bin"
(base) PS C:\Program Files\R\R-3.6.2\bin&gt; .\R.exe

R version 3.6.2 (2019-12-12) -- "Dark and Stormy Night"
Copyright (C) 2019 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R est un logiciel libre livr√© sans AUCUNE GARANTIE.
Vous pouvez le redistribuer sous certaines conditions.
Tapez 'license()' ou 'licence()' pour plus de d√©tails.

R est un projet collaboratif avec de nombreux contributeurs.
Tapez 'contributors()' pour plus d'information et
'citation()' pour la fa√ßon de le citer dans les publications.

Tapez 'demo()' pour des d√©monstrations, 'help()' pour l'aide
en ligne ou 'help.start()' pour obtenir l'aide au format HTML.
Tapez 'q()' pour quitter R.

&gt; install.packages("IRkernel")
Installation du package dans 'C:/Users/fifi/Documents/R/win-library/3.6'
(car 'lib' n'est pas sp√©cifi√©)
--- SVP s√©lectionner un miroir CRAN pour cette session ---
essai de l'URL 'https://cloud.r-project.org/bin/windows/contrib/3.6/IRkernel_1.1.zip'
Content type 'application/zip' length 138696 bytes (135 KB)
downloaded 135 KB

le package 'IRkernel' a √©t√© d√©compress√© et les sommes MD5 ont √©t√© v√©rifi√©es avec succ√©s

Les packages binaires t√©l√©charg√©s sont dans
       C:\Users\fifi\AppData\Local\Temp\Rtmp6xJtB3\downloaded_packages

&gt; IRkernel::installspec()
[InstallKernelSpec] Installed kernelspec ir in C:\Users\fifi\AppData\Roaming\jupyter\kernels\ir
&gt; qui()</code></pre>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./01-intro.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03-tableaux.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Organisation des donn√©es et op√©rations sur des tableaux</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">Analyse et mod√©lisation d‚Äôagro√©cosyst√®mes est construit avec <a href="https://quarto.org/">Quarto</a>.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Lien vers le <a href="https://essicolo.github.io/ecologie-mathematique-R/">manuel original</a>.</div>
  </div>
</footer>


</body></html>