<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Visualisation | Analyse et modélisation d’agroécosystèmes</title>
  <meta name="description" content="Ce cours a pour objectif de former les étudiants gradués en génie agroenvironnemental, génie civil, génie écologique, agronomie, biologie, foresterie et écologie en analyse et modélisation de systèmes vivants. Les sujets traités sont l’introduction au langage de programmation R, l’analyse statistique descriptive, la visualisation, la modélisation inférentielle, prédictive et déterministe." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Visualisation | Analyse et modélisation d’agroécosystèmes" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Ce cours a pour objectif de former les étudiants gradués en génie agroenvironnemental, génie civil, génie écologique, agronomie, biologie, foresterie et écologie en analyse et modélisation de systèmes vivants. Les sujets traités sont l’introduction au langage de programmation R, l’analyse statistique descriptive, la visualisation, la modélisation inférentielle, prédictive et déterministe." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Visualisation | Analyse et modélisation d’agroécosystèmes" />
  
  <meta name="twitter:description" content="Ce cours a pour objectif de former les étudiants gradués en génie agroenvironnemental, génie civil, génie écologique, agronomie, biologie, foresterie et écologie en analyse et modélisation de systèmes vivants. Les sujets traités sont l’introduction au langage de programmation R, l’analyse statistique descriptive, la visualisation, la modélisation inférentielle, prédictive et déterministe." />
  

<meta name="author" content="Serge-Étienne Parent" />


<meta name="date" content="2020-04-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapitre-tableaux.html"/>
<link rel="next" href="chapitre-git.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.5/grViz.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>
<script src="libs/Leaflet.Sync-0.0.5/L.Map.Sync.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#définitions"><i class="fa fa-check"></i><b>1.1</b> Définitions</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#à-qui-sadresse-ce-manuel"><i class="fa fa-check"></i><b>1.2</b> À qui s’adresse ce manuel?</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#les-logiciels-libres"><i class="fa fa-check"></i><b>1.3</b> Les logiciels libres</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#langage-de-programmation"><i class="fa fa-check"></i><b>1.4</b> Langage de programmation</a><ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#r"><i class="fa fa-check"></i><b>1.4.1</b> R</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#pourquoi-pas-python"><i class="fa fa-check"></i><b>1.4.2</b> Pourquoi pas Python?</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#pourquoi-pas-matlab"><i class="fa fa-check"></i><b>1.4.3</b> Pourquoi pas Matlab?</a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#et-sas"><i class="fa fa-check"></i><b>1.4.4</b> Et… SAS?</a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#mais-pourquoi-pas-______"><i class="fa fa-check"></i><b>1.4.5</b> Mais pourquoi pas ______ ?</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#contenu-du-manuel"><i class="fa fa-check"></i><b>1.5</b> Contenu du manuel</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#objectifs-généraux"><i class="fa fa-check"></i><b>1.6</b> Objectifs généraux</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#lectures-complémentaires"><i class="fa fa-check"></i><b>1.7</b> Lectures complémentaires</a><ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#écologie-mathématique"><i class="fa fa-check"></i><b>1.7.1</b> Écologie mathématique</a></li>
<li class="chapter" data-level="1.7.2" data-path="index.html"><a href="index.html#programmation"><i class="fa fa-check"></i><b>1.7.2</b> Programmation</a></li>
<li class="chapter" data-level="1.7.3" data-path="index.html"><a href="index.html#divers"><i class="fa fa-check"></i><b>1.7.3</b> Divers</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#besoin-daide"><i class="fa fa-check"></i><b>1.8</b> Besoin d’aide?</a></li>
<li class="chapter" data-level="1.9" data-path="index.html"><a href="index.html#à-propos-de-lauteur"><i class="fa fa-check"></i><b>1.9</b> À propos de l’auteur</a></li>
<li class="chapter" data-level="1.10" data-path="index.html"><a href="index.html#un-cours-complémentaire-à-dautres-cours"><i class="fa fa-check"></i><b>1.10</b> Un cours complémentaire à d’autres cours</a></li>
<li class="chapter" data-level="1.11" data-path="index.html"><a href="index.html#contribuer-au-manuel"><i class="fa fa-check"></i><b>1.11</b> Contribuer au manuel</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html"><i class="fa fa-check"></i><b>2</b> La science des données avec R</a><ul>
<li class="chapter" data-level="2.1" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#statistiques-ou-science-des-données"><i class="fa fa-check"></i><b>2.1</b> Statistiques ou science des données?</a></li>
<li class="chapter" data-level="2.2" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#débuter-en-r"><i class="fa fa-check"></i><b>2.2</b> Débuter en R</a></li>
<li class="chapter" data-level="2.3" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#préparer-son-flux-de-travail"><i class="fa fa-check"></i><b>2.3</b> Préparer son flux de travail</a><ul>
<li class="chapter" data-level="2.3.1" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#installation-classique"><i class="fa fa-check"></i><b>2.3.1</b> Installation classique</a></li>
<li class="chapter" data-level="2.3.2" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#installation-avec-anaconda"><i class="fa fa-check"></i><b>2.3.2</b> Installation avec Anaconda</a></li>
<li class="chapter" data-level="2.3.3" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#utilisation-infonuagique"><i class="fa fa-check"></i><b>2.3.3</b> Utilisation infonuagique</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#premiers-pas-avec-r"><i class="fa fa-check"></i><b>2.4</b> Premiers pas avec R</a><ul>
<li class="chapter" data-level="2.4.1" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#types-de-données"><i class="fa fa-check"></i><b>2.4.1</b> Types de données</a></li>
<li class="chapter" data-level="2.4.2" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#les-collections-de-données"><i class="fa fa-check"></i><b>2.4.2</b> Les collections de données</a></li>
<li class="chapter" data-level="2.4.3" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#les-fonctions"><i class="fa fa-check"></i><b>2.4.3</b> Les fonctions</a></li>
<li class="chapter" data-level="2.4.4" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#les-boucles"><i class="fa fa-check"></i><b>2.4.4</b> Les boucles</a></li>
<li class="chapter" data-level="2.4.5" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#conditions-if-else-if-else"><i class="fa fa-check"></i><b>2.4.5</b> Conditions: <code>if</code>, <code>else if</code>, <code>else</code></a></li>
<li class="chapter" data-level="2.4.6" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#installer-et-charger-un-module"><i class="fa fa-check"></i><b>2.4.6</b> Installer et charger un module</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#enfin"><i class="fa fa-check"></i><b>2.5</b> Enfin…</a></li>
<li class="chapter" data-level="2.6" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#petit-truc"><i class="fa fa-check"></i><b>2.6</b> Petit truc!</a></li>
<li class="chapter" data-level="2.7" data-path="chapitre-intro-a-R.html"><a href="chapitre-intro-a-R.html#extra-jupyter"><i class="fa fa-check"></i><b>2.7</b> Extra: Utiliser R avec Jupyter</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html"><i class="fa fa-check"></i><b>3</b> Organisation des données et opérations sur des tableaux</a><ul>
<li class="chapter" data-level="3.1" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#les-collections-de-données-1"><i class="fa fa-check"></i><b>3.1</b> Les collections de données</a></li>
<li class="chapter" data-level="3.2" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#organiser-un-tableau-de-données"><i class="fa fa-check"></i><b>3.2</b> Organiser un tableau de données</a></li>
<li class="chapter" data-level="3.3" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#formats-de-tableau"><i class="fa fa-check"></i><b>3.3</b> Formats de tableau</a><ul>
<li class="chapter" data-level="3.3.1" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#xls-ou-xlsx"><i class="fa fa-check"></i><b>3.3.1</b> <em>xls</em> ou <em>xlsx</em></a></li>
<li class="chapter" data-level="3.3.2" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#csv"><i class="fa fa-check"></i><b>3.3.2</b> <em>csv</em></a></li>
<li class="chapter" data-level="3.3.3" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#json"><i class="fa fa-check"></i><b>3.3.3</b> <em>json</em></a></li>
<li class="chapter" data-level="3.3.4" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#sqlite"><i class="fa fa-check"></i><b>3.3.4</b> SQLite</a></li>
<li class="chapter" data-level="3.3.5" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#suggestion"><i class="fa fa-check"></i><b>3.3.5</b> Suggestion</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#entreposer-ses-données"><i class="fa fa-check"></i><b>3.4</b> Entreposer ses données</a></li>
<li class="chapter" data-level="3.5" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#manipuler-des-données-en-mode-tidyverse"><i class="fa fa-check"></i><b>3.5</b> Manipuler des données en mode tidyverse</a><ul>
<li class="chapter" data-level="3.5.1" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#importer-vos-données-dans-votre-session-de-travail"><i class="fa fa-check"></i><b>3.5.1</b> Importer vos données dans votre session de travail</a></li>
<li class="chapter" data-level="3.5.2" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#comment-sélectionner-et-filtrer-des-données"><i class="fa fa-check"></i><b>3.5.2</b> Comment sélectionner et filtrer des données ?</a></li>
<li class="chapter" data-level="3.5.3" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#le-format-long-et-le-format-large"><i class="fa fa-check"></i><b>3.5.3</b> Le format long et le format large</a></li>
<li class="chapter" data-level="3.5.4" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#combiner-des-tableaux"><i class="fa fa-check"></i><b>3.5.4</b> Combiner des tableaux</a></li>
<li class="chapter" data-level="3.5.5" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#opérations-sur-les-tableaux"><i class="fa fa-check"></i><b>3.5.5</b> Opérations sur les tableaux</a></li>
<li class="chapter" data-level="3.5.6" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#exemple-difficile"><i class="fa fa-check"></i><b>3.5.6</b> Exemple (difficile)</a></li>
<li class="chapter" data-level="3.5.7" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#exporter-un-tableau"><i class="fa fa-check"></i><b>3.5.7</b> Exporter un tableau</a></li>
<li class="chapter" data-level="3.5.8" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#aller-plus-loin-dans-le-tidyverse"><i class="fa fa-check"></i><b>3.5.8</b> Aller plus loin dans le tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="chapitre-tableaux.html"><a href="chapitre-tableaux.html#références"><i class="fa fa-check"></i><b>3.6</b> Références</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html"><i class="fa fa-check"></i><b>4</b> Visualisation</a><ul>
<li class="chapter" data-level="4.1" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#pourquoi-explorer-graphiquement"><i class="fa fa-check"></i><b>4.1</b> Pourquoi explorer graphiquement?</a></li>
<li class="chapter" data-level="4.2" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#publier-un-graphique"><i class="fa fa-check"></i><b>4.2</b> Publier un graphique</a><ul>
<li class="chapter" data-level="4.2.1" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#cinq-qualités-dun-bon-graphique"><i class="fa fa-check"></i><b>4.2.1</b> Cinq qualités d’un bon graphique</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#choisir-le-type-de-graphique-le-plus-approprié"><i class="fa fa-check"></i><b>4.3</b> Choisir le type de graphique le plus approprié</a></li>
<li class="chapter" data-level="4.4" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#choisir-son-outil-de-visualisation"><i class="fa fa-check"></i><b>4.4</b> Choisir son outil de visualisation</a><ul>
<li class="chapter" data-level="4.4.1" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#approche-impérative"><i class="fa fa-check"></i><b>4.4.1</b> Approche impérative</a></li>
<li class="chapter" data-level="4.4.2" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#approche-déclarative"><i class="fa fa-check"></i><b>4.4.2</b> Approche déclarative</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#visualisation-en-r"><i class="fa fa-check"></i><b>4.5</b> Visualisation en R</a></li>
<li class="chapter" data-level="4.6" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#module-de-base-pour-les-graphiques"><i class="fa fa-check"></i><b>4.6</b> Module de base pour les graphiques</a></li>
<li class="chapter" data-level="4.7" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#la-grammaire-graphique-ggplot2"><i class="fa fa-check"></i><b>4.7</b> La grammaire graphique <strong><code>ggplot2</code></strong></a></li>
<li class="chapter" data-level="4.8" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#mon-premier-ggplot"><i class="fa fa-check"></i><b>4.8</b> Mon premier ggplot</a><ul>
<li class="chapter" data-level="4.8.1" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#plusieurs-sources-de-données"><i class="fa fa-check"></i><b>4.8.1</b> Plusieurs sources de données</a></li>
<li class="chapter" data-level="4.8.2" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#exporter-avec-style"><i class="fa fa-check"></i><b>4.8.2</b> Exporter avec style</a></li>
<li class="chapter" data-level="4.8.3" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#nuages-de-points"><i class="fa fa-check"></i><b>4.8.3</b> Nuages de points</a></li>
<li class="chapter" data-level="4.8.4" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#diagrammes-en-lignes"><i class="fa fa-check"></i><b>4.8.4</b> Diagrammes en lignes</a></li>
<li class="chapter" data-level="4.8.5" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#les-histogrammes"><i class="fa fa-check"></i><b>4.8.5</b> Les histogrammes</a></li>
<li class="chapter" data-level="4.8.6" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#boxplots"><i class="fa fa-check"></i><b>4.8.6</b> Boxplots</a></li>
<li class="chapter" data-level="4.8.7" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#les-diagrammes-en-barre"><i class="fa fa-check"></i><b>4.8.7</b> Les diagrammes en barre</a></li>
<li class="chapter" data-level="4.8.8" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#exporter-un-graphique"><i class="fa fa-check"></i><b>4.8.8</b> Exporter un graphique</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#les-graphiques-comme-outil-dexploration-des-données"><i class="fa fa-check"></i><b>4.9</b> Les graphiques comme outil d’exploration des données</a><ul>
<li class="chapter" data-level="4.9.1" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#des-graphiques-interactifs"><i class="fa fa-check"></i><b>4.9.1</b> Des graphiques interactifs!</a></li>
<li class="chapter" data-level="4.9.2" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#des-extensions-de-ggplot2"><i class="fa fa-check"></i><b>4.9.2</b> Des extensions de <strong><code>ggplot2</code></strong></a></li>
<li class="chapter" data-level="4.9.3" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#aller-plus-loin-avec-ggplot2"><i class="fa fa-check"></i><b>4.9.3</b> Aller plus loin avec <strong><code>ggplot2</code></strong></a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#extra-règles-particulières"><i class="fa fa-check"></i><b>4.10</b> Extra: Règles particulières</a><ul>
<li class="chapter" data-level="4.10.1" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#ne-tronquez-pas-inutilement-laxe-des-y"><i class="fa fa-check"></i><b>4.10.1</b> Ne tronquez pas inutilement l’axe des <span class="math inline">\(y\)</span></a></li>
<li class="chapter" data-level="4.10.2" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#utilisez-un-encrage-proportionnel"><i class="fa fa-check"></i><b>4.10.2</b> Utilisez un encrage proportionnel</a></li>
<li class="chapter" data-level="4.10.3" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#publiez-vos-données"><i class="fa fa-check"></i><b>4.10.3</b> Publiez vos données</a></li>
<li class="chapter" data-level="4.10.4" data-path="chapitre-visualisation.html"><a href="chapitre-visualisation.html#visitez-www.junkcharts.typepad.com-de-temps-à-autre"><i class="fa fa-check"></i><b>4.10.4</b> Visitez www.junkcharts.typepad.com de temps à autre</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chapitre-git.html"><a href="chapitre-git.html"><i class="fa fa-check"></i><b>5</b> Science ouverte et reproductibilité</a><ul>
<li class="chapter" data-level="5.1" data-path="chapitre-git.html"><a href="chapitre-git.html#un-code-reproductible"><i class="fa fa-check"></i><b>5.1</b> Un code reproductible</a><ul>
<li class="chapter" data-level="5.1.1" data-path="chapitre-git.html"><a href="chapitre-git.html#structure-dun-projet"><i class="fa fa-check"></i><b>5.1.1</b> Structure d’un projet</a></li>
<li class="chapter" data-level="5.1.2" data-path="chapitre-git.html"><a href="chapitre-git.html#le-format-r-markdown"><i class="fa fa-check"></i><b>5.1.2</b> Le format <span>R markdown</span></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="chapitre-git.html"><a href="chapitre-git.html#introduction-à-github"><i class="fa fa-check"></i><b>5.2</b> Introduction à GitHub</a></li>
<li class="chapter" data-level="5.3" data-path="chapitre-git.html"><a href="chapitre-git.html#introduction-à-pakrat"><i class="fa fa-check"></i><b>5.3</b> Introduction à Pakrat 📦🐀</a></li>
<li class="chapter" data-level="5.4" data-path="chapitre-git.html"><a href="chapitre-git.html#pour-terminer-le-reprex"><i class="fa fa-check"></i><b>5.4</b> Pour terminer, le <strong>reprex</strong></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html"><i class="fa fa-check"></i><b>6</b> Biostatistiques</a><ul>
<li class="chapter" data-level="6.1" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#populations-et-échantillons"><i class="fa fa-check"></i><b>6.1</b> Populations et échantillons</a></li>
<li class="chapter" data-level="6.2" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#les-variables"><i class="fa fa-check"></i><b>6.2</b> Les variables</a><ul>
<li class="chapter" data-level="6.2.1" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#variables-quantitatives"><i class="fa fa-check"></i><b>6.2.1</b> Variables quantitatives</a></li>
<li class="chapter" data-level="6.2.2" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#variables-qualitatives"><i class="fa fa-check"></i><b>6.2.2</b> Variables qualitatives</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#les-probabilités"><i class="fa fa-check"></i><b>6.3</b> Les probabilités</a></li>
<li class="chapter" data-level="6.4" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#les-distributions"><i class="fa fa-check"></i><b>6.4</b> Les distributions</a><ul>
<li class="chapter" data-level="6.4.1" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#distribution-binomiale"><i class="fa fa-check"></i><b>6.4.1</b> Distribution binomiale</a></li>
<li class="chapter" data-level="6.4.2" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#distribution-de-poisson"><i class="fa fa-check"></i><b>6.4.2</b> Distribution de Poisson</a></li>
<li class="chapter" data-level="6.4.3" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#distribution-uniforme"><i class="fa fa-check"></i><b>6.4.3</b> Distribution uniforme</a></li>
<li class="chapter" data-level="6.4.4" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#distribution-normale"><i class="fa fa-check"></i><b>6.4.4</b> Distribution normale</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#statistiques-descriptives"><i class="fa fa-check"></i><b>6.5</b> Statistiques descriptives</a></li>
<li class="chapter" data-level="6.6" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#tests-dhypothèses-à-un-et-deux-échantillons"><i class="fa fa-check"></i><b>6.6</b> Tests d’hypothèses à un et deux échantillons</a><ul>
<li class="chapter" data-level="6.6.1" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#test-de-t-à-un-seul-échantillon"><i class="fa fa-check"></i><b>6.6.1</b> Test de t à un seul échantillon</a></li>
<li class="chapter" data-level="6.6.2" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#attention-mauvaises-interprétations-des-p-values"><i class="fa fa-check"></i><b>6.6.2</b> Attention: mauvaises interprétations des <em>p-values</em></a></li>
<li class="chapter" data-level="6.6.3" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#test-de-wilcoxon-à-un-seul-échantillon"><i class="fa fa-check"></i><b>6.6.3</b> Test de Wilcoxon à un seul échantillon</a></li>
<li class="chapter" data-level="6.6.4" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#tests-de-t-à-deux-échantillons"><i class="fa fa-check"></i><b>6.6.4</b> Tests de t à deux échantillons</a></li>
<li class="chapter" data-level="6.6.5" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#comparaison-des-variances"><i class="fa fa-check"></i><b>6.6.5</b> Comparaison des variances</a></li>
<li class="chapter" data-level="6.6.6" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#tests-de-wilcoxon-à-deux-échantillons"><i class="fa fa-check"></i><b>6.6.6</b> Tests de Wilcoxon à deux échantillons</a></li>
<li class="chapter" data-level="6.6.7" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#les-tests-pairés"><i class="fa fa-check"></i><b>6.6.7</b> Les tests pairés</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#lanalyse-de-variance"><i class="fa fa-check"></i><b>6.7</b> L’analyse de variance</a></li>
<li class="chapter" data-level="6.8" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#les-modèles-statistiques"><i class="fa fa-check"></i><b>6.8</b> Les modèles statistiques</a><ul>
<li class="chapter" data-level="6.8.1" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#modèles-à-effets-fixes"><i class="fa fa-check"></i><b>6.8.1</b> Modèles à effets fixes</a></li>
<li class="chapter" data-level="6.8.2" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#modèles-à-effets-mixtes"><i class="fa fa-check"></i><b>6.8.2</b> Modèles à effets mixtes</a></li>
<li class="chapter" data-level="6.8.3" data-path="chapitre-biostats.html"><a href="chapitre-biostats.html#aller-plus-loin"><i class="fa fa-check"></i><b>6.8.3</b> Aller plus loin</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chapitre-biostats-bayes.html"><a href="chapitre-biostats-bayes.html"><i class="fa fa-check"></i><b>7</b> Introduction à l’analyse bayésienne en écologie</a><ul>
<li class="chapter" data-level="7.1" data-path="chapitre-biostats-bayes.html"><a href="chapitre-biostats-bayes.html#quest-ce-que-cest"><i class="fa fa-check"></i><b>7.1</b> Qu’est-ce que c’est?</a></li>
<li class="chapter" data-level="7.2" data-path="chapitre-biostats-bayes.html"><a href="chapitre-biostats-bayes.html#pourquoi-lutiliser"><i class="fa fa-check"></i><b>7.2</b> Pourquoi l’utiliser?</a></li>
<li class="chapter" data-level="7.3" data-path="chapitre-biostats-bayes.html"><a href="chapitre-biostats-bayes.html#comment-lutiliser"><i class="fa fa-check"></i><b>7.3</b> Comment l’utiliser?</a></li>
<li class="chapter" data-level="7.4" data-path="chapitre-biostats-bayes.html"><a href="chapitre-biostats-bayes.html#faucons-pélerins"><i class="fa fa-check"></i><b>7.4</b> Faucons pélerins</a></li>
<li class="chapter" data-level="7.5" data-path="chapitre-biostats-bayes.html"><a href="chapitre-biostats-bayes.html#statistiques-dune-population"><i class="fa fa-check"></i><b>7.5</b> Statistiques d’une population</a><ul>
<li class="chapter" data-level="7.5.1" data-path="chapitre-biostats-bayes.html"><a href="chapitre-biostats-bayes.html#calcul-analytique"><i class="fa fa-check"></i><b>7.5.1</b> Calcul analytique</a></li>
<li class="chapter" data-level="7.5.2" data-path="chapitre-biostats-bayes.html"><a href="chapitre-biostats-bayes.html#greta"><i class="fa fa-check"></i><b>7.5.2</b> greta</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="chapitre-biostats-bayes.html"><a href="chapitre-biostats-bayes.html#test-de-t-différence-entre-des-groupes"><i class="fa fa-check"></i><b>7.6</b> Test de t: Différence entre des groupes</a></li>
<li class="chapter" data-level="7.7" data-path="chapitre-biostats-bayes.html"><a href="chapitre-biostats-bayes.html#modélisation-multiniveau"><i class="fa fa-check"></i><b>7.7</b> Modélisation multiniveau</a></li>
<li class="chapter" data-level="7.8" data-path="chapitre-biostats-bayes.html"><a href="chapitre-biostats-bayes.html#pour-aller-plus-loin"><i class="fa fa-check"></i><b>7.8</b> Pour aller plus loin</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html"><i class="fa fa-check"></i><b>8</b> Explorer R</a><ul>
<li class="chapter" data-level="8.1" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#r-sur-le-web"><i class="fa fa-check"></i><b>8.1</b> R sur le web</a><ul>
<li class="chapter" data-level="8.1.1" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#github"><i class="fa fa-check"></i><b>8.1.1</b> GitHub</a></li>
<li class="chapter" data-level="8.1.2" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#twitter"><i class="fa fa-check"></i><b>8.1.2</b> Twitter</a></li>
<li class="chapter" data-level="8.1.3" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#nouvelles"><i class="fa fa-check"></i><b>8.1.3</b> Nouvelles</a></li>
<li class="chapter" data-level="8.1.4" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#des-questions"><i class="fa fa-check"></i><b>8.1.4</b> Des questions?</a></li>
<li class="chapter" data-level="8.1.5" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#participer"><i class="fa fa-check"></i><b>8.1.5</b> Participer</a></li>
<li class="chapter" data-level="8.1.6" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#mise-en-garde"><i class="fa fa-check"></i><b>8.1.6</b> Mise en garde</a></li>
<li class="chapter" data-level="8.1.7" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#prendre-tout-ça-en-note"><i class="fa fa-check"></i><b>8.1.7</b> Prendre tout ça en note</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#r-en-chaire-et-en-os"><i class="fa fa-check"></i><b>8.2</b> R en chaire et en os</a></li>
<li class="chapter" data-level="8.3" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#quelques-outils-en-écologie-mathématique-avec-r"><i class="fa fa-check"></i><b>8.3</b> Quelques outils en écologie mathématique avec R</a><ul>
<li class="chapter" data-level="8.3.1" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#prétraitement-des-données"><i class="fa fa-check"></i><b>8.3.1</b> Prétraitement des données</a></li>
<li class="chapter" data-level="8.3.2" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#acquérir-des-données-météo"><i class="fa fa-check"></i><b>8.3.2</b> Acquérir des données météo</a></li>
<li class="chapter" data-level="8.3.3" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#pédométrie-avec-r"><i class="fa fa-check"></i><b>8.3.3</b> Pédométrie avec R</a></li>
<li class="chapter" data-level="8.3.4" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#méta-analyses-en-r"><i class="fa fa-check"></i><b>8.3.4</b> Méta-analyses en R</a></li>
<li class="chapter" data-level="8.3.5" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#créer-des-applications-avec-r"><i class="fa fa-check"></i><b>8.3.5</b> Créer des applications avec R</a></li>
<li class="chapter" data-level="8.3.6" data-path="chapitre-explorer.html"><a href="chapitre-explorer.html#travailler-en-python"><i class="fa fa-check"></i><b>8.3.6</b> Travailler en Python</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html"><i class="fa fa-check"></i><b>9</b> Association, partitionnement et ordination</a><ul>
<li class="chapter" data-level="9.1" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#espaces-danalyse"><i class="fa fa-check"></i><b>9.1</b> Espaces d’analyse</a><ul>
<li class="chapter" data-level="9.1.1" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#abondance-et-occurence"><i class="fa fa-check"></i><b>9.1.1</b> Abondance et occurence</a></li>
<li class="chapter" data-level="9.1.2" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#environnement"><i class="fa fa-check"></i><b>9.1.2</b> Environnement</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#analyse-dassociation"><i class="fa fa-check"></i><b>9.2</b> Analyse d’association</a><ul>
<li class="chapter" data-level="9.2.1" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#association-entre-objets-mode-q"><i class="fa fa-check"></i><b>9.2.1</b> Association entre objets (mode Q)</a></li>
<li class="chapter" data-level="9.2.2" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#associations-entre-variables-mode-r"><i class="fa fa-check"></i><b>9.2.2</b> Associations entre variables (mode R)</a></li>
<li class="chapter" data-level="9.2.3" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#conclusion-sur-les-associations"><i class="fa fa-check"></i><b>9.2.3</b> Conclusion sur les associations</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#partitionnement"><i class="fa fa-check"></i><b>9.3</b> Partitionnement</a><ul>
<li class="chapter" data-level="9.3.1" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#évaluation-dun-partitionnement"><i class="fa fa-check"></i><b>9.3.1</b> Évaluation d’un partitionnement</a></li>
<li class="chapter" data-level="9.3.2" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#partitionnement-non-hiérarchique"><i class="fa fa-check"></i><b>9.3.2</b> Partitionnement non hiérarchique</a></li>
<li class="chapter" data-level="9.3.3" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#partitionnement-hiérarchique"><i class="fa fa-check"></i><b>9.3.3</b> Partitionnement hiérarchique</a></li>
<li class="chapter" data-level="9.3.4" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#partitionnement-hiérarchique-basée-sur-la-densité-des-points"><i class="fa fa-check"></i><b>9.3.4</b> Partitionnement hiérarchique basée sur la densité des points</a></li>
<li class="chapter" data-level="9.3.5" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#conclusion-sur-le-partitionnement"><i class="fa fa-check"></i><b>9.3.5</b> Conclusion sur le partitionnement</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#ordination"><i class="fa fa-check"></i><b>9.4</b> Ordination</a><ul>
<li class="chapter" data-level="9.4.1" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#ordination-non-contraignante"><i class="fa fa-check"></i><b>9.4.1</b> Ordination non contraignante</a></li>
<li class="chapter" data-level="9.4.2" data-path="chapitre-ordination.html"><a href="chapitre-ordination.html#ordination-contraignante"><i class="fa fa-check"></i><b>9.4.2</b> Ordination contraignante</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chapitre-outliers.html"><a href="chapitre-outliers.html"><i class="fa fa-check"></i><b>10</b> Détection de valeurs aberrantes et imputation de données manquantes</a><ul>
<li class="chapter" data-level="10.1" data-path="chapitre-outliers.html"><a href="chapitre-outliers.html#données-manquantes-définition-origine-typologie-et-traitement"><i class="fa fa-check"></i><b>10.1</b> Données manquantes: définition, origine, typologie et traitement</a><ul>
<li class="chapter" data-level="10.1.1" data-path="chapitre-outliers.html"><a href="chapitre-outliers.html#définition"><i class="fa fa-check"></i><b>10.1.1</b> Définition</a></li>
<li class="chapter" data-level="10.1.2" data-path="chapitre-outliers.html"><a href="chapitre-outliers.html#origines-des-données-manquantes"><i class="fa fa-check"></i><b>10.1.2</b> Origines des données manquantes</a></li>
<li class="chapter" data-level="10.1.3" data-path="chapitre-outliers.html"><a href="chapitre-outliers.html#profils-des-données-manquantes"><i class="fa fa-check"></i><b>10.1.3</b> Profils des données manquantes</a></li>
<li class="chapter" data-level="10.1.4" data-path="chapitre-outliers.html"><a href="chapitre-outliers.html#traitement-des-données-manquantes"><i class="fa fa-check"></i><b>10.1.4</b> Traitement des données manquantes</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="chapitre-outliers.html"><a href="chapitre-outliers.html#valeurs-et-échantillons-aberrants-définition-origines-méthodes-de-détection-et-traitement"><i class="fa fa-check"></i><b>10.2</b> Valeurs et échantillons aberrants: définition, origines, méthodes de détection et traitement</a><ul>
<li class="chapter" data-level="10.2.1" data-path="chapitre-outliers.html"><a href="chapitre-outliers.html#définitions-1"><i class="fa fa-check"></i><b>10.2.1</b> Définitions</a></li>
<li class="chapter" data-level="10.2.2" data-path="chapitre-outliers.html"><a href="chapitre-outliers.html#origines"><i class="fa fa-check"></i><b>10.2.2</b> Origines</a></li>
<li class="chapter" data-level="10.2.3" data-path="chapitre-outliers.html"><a href="chapitre-outliers.html#détection-et-traitement-des-valeurs-aberrantes-univariés"><i class="fa fa-check"></i><b>10.2.3</b> Détection et traitement des valeurs aberrantes univariés</a></li>
<li class="chapter" data-level="10.2.4" data-path="chapitre-outliers.html"><a href="chapitre-outliers.html#détection-et-traitement-des-échantillons-aberrants-multivariés"><i class="fa fa-check"></i><b>10.2.4</b> Détection et traitement des échantillons aberrants multivariés</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="chapitre-ml.html"><a href="chapitre-ml.html"><i class="fa fa-check"></i><b>11</b> Introduction à l’autoapprentissage</a><ul>
<li class="chapter" data-level="11.1" data-path="chapitre-ml.html"><a href="chapitre-ml.html#lexique"><i class="fa fa-check"></i><b>11.1</b> Lexique</a></li>
<li class="chapter" data-level="11.2" data-path="chapitre-ml.html"><a href="chapitre-ml.html#démarche"><i class="fa fa-check"></i><b>11.2</b> Démarche</a><ul>
<li class="chapter" data-level="11.2.1" data-path="chapitre-ml.html"><a href="chapitre-ml.html#prétraitement"><i class="fa fa-check"></i><b>11.2.1</b> Prétraitement</a></li>
<li class="chapter" data-level="11.2.2" data-path="chapitre-ml.html"><a href="chapitre-ml.html#entraînement-et-test"><i class="fa fa-check"></i><b>11.2.2</b> Entraînement et test</a></li>
<li class="chapter" data-level="11.2.3" data-path="chapitre-ml.html"><a href="chapitre-ml.html#sousapprentissage-et-surapprentissage"><i class="fa fa-check"></i><b>11.2.3</b> Sousapprentissage et surapprentissage</a></li>
<li class="chapter" data-level="11.2.4" data-path="chapitre-ml.html"><a href="chapitre-ml.html#validation-croisée"><i class="fa fa-check"></i><b>11.2.4</b> Validation croisée</a></li>
<li class="chapter" data-level="11.2.5" data-path="chapitre-ml.html"><a href="chapitre-ml.html#choix-de-lalgorithme-dapprentissage"><i class="fa fa-check"></i><b>11.2.5</b> Choix de l’algorithme d’apprentissage</a></li>
<li class="chapter" data-level="11.2.6" data-path="chapitre-ml.html"><a href="chapitre-ml.html#déploiement"><i class="fa fa-check"></i><b>11.2.6</b> Déploiement</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="chapitre-ml.html"><a href="chapitre-ml.html#lautoapprentissage-en-r"><i class="fa fa-check"></i><b>11.3</b> L’autoapprentissage en R</a></li>
<li class="chapter" data-level="11.4" data-path="chapitre-ml.html"><a href="chapitre-ml.html#algorithmes"><i class="fa fa-check"></i><b>11.4</b> Algorithmes</a><ul>
<li class="chapter" data-level="11.4.1" data-path="chapitre-ml.html"><a href="chapitre-ml.html#les-k-plus-proches-voisins"><i class="fa fa-check"></i><b>11.4.1</b> Les <em>k</em> plus proches voisins</a></li>
<li class="chapter" data-level="11.4.2" data-path="chapitre-ml.html"><a href="chapitre-ml.html#les-arbres-décisionnels"><i class="fa fa-check"></i><b>11.4.2</b> Les arbres décisionnels</a></li>
<li class="chapter" data-level="11.4.3" data-path="chapitre-ml.html"><a href="chapitre-ml.html#les-réseaux-neuronaux"><i class="fa fa-check"></i><b>11.4.3</b> Les réseaux neuronaux</a></li>
<li class="chapter" data-level="11.4.4" data-path="chapitre-ml.html"><a href="chapitre-ml.html#les-processus-gaussiens"><i class="fa fa-check"></i><b>11.4.4</b> Les processus gaussiens</a></li>
<li class="chapter" data-level="11.4.5" data-path="chapitre-ml.html"><a href="chapitre-ml.html#les-processus-gaussiens-en-r"><i class="fa fa-check"></i><b>11.4.5</b> Les processus gaussiens en <code>R</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="chapitre-temps.html"><a href="chapitre-temps.html"><i class="fa fa-check"></i><b>12</b> Les séries temporelles</a><ul>
<li class="chapter" data-level="12.1" data-path="chapitre-temps.html"><a href="chapitre-temps.html#opérations-sur-les-données-temporelles"><i class="fa fa-check"></i><b>12.1</b> Opérations sur les données temporelles</a></li>
<li class="chapter" data-level="12.2" data-path="chapitre-temps.html"><a href="chapitre-temps.html#analyse-de-séries-temporelles"><i class="fa fa-check"></i><b>12.2</b> Analyse de séries temporelles</a><ul>
<li class="chapter" data-level="12.2.1" data-path="chapitre-temps.html"><a href="chapitre-temps.html#créer-et-visualiser-des-séries-temporelles"><i class="fa fa-check"></i><b>12.2.1</b> Créer et visualiser des séries temporelles</a></li>
<li class="chapter" data-level="12.2.2" data-path="chapitre-temps.html"><a href="chapitre-temps.html#structures-dans-les-séries-temporelles"><i class="fa fa-check"></i><b>12.2.2</b> Structures dans les séries temporelles</a></li>
<li class="chapter" data-level="12.2.3" data-path="chapitre-temps.html"><a href="chapitre-temps.html#lautocorrélation"><i class="fa fa-check"></i><b>12.2.3</b> L’autocorrélation</a></li>
<li class="chapter" data-level="12.2.4" data-path="chapitre-temps.html"><a href="chapitre-temps.html#signification-statistique-dune-série-temporelle"><i class="fa fa-check"></i><b>12.2.4</b> Signification statistique d’une série temporelle</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="chapitre-temps.html"><a href="chapitre-temps.html#modélisation-de-séries-temporelles"><i class="fa fa-check"></i><b>12.3</b> Modélisation de séries temporelles</a><ul>
<li class="chapter" data-level="12.3.1" data-path="chapitre-temps.html"><a href="chapitre-temps.html#méthode-naïve"><i class="fa fa-check"></i><b>12.3.1</b> Méthode naïve</a></li>
<li class="chapter" data-level="12.3.2" data-path="chapitre-temps.html"><a href="chapitre-temps.html#méthode-ses"><i class="fa fa-check"></i><b>12.3.2</b> Méthode SES</a></li>
<li class="chapter" data-level="12.3.3" data-path="chapitre-temps.html"><a href="chapitre-temps.html#la-méthode-arima"><i class="fa fa-check"></i><b>12.3.3</b> La méthode ARIMA</a></li>
<li class="chapter" data-level="12.3.4" data-path="chapitre-temps.html"><a href="chapitre-temps.html#les-modèles-dynamiques"><i class="fa fa-check"></i><b>12.3.4</b> Les modèles dynamiques</a></li>
<li class="chapter" data-level="12.3.5" data-path="chapitre-temps.html"><a href="chapitre-temps.html#les-modèles-tbats"><i class="fa fa-check"></i><b>12.3.5</b> Les modèles TBATS</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="chapitre-temps.html"><a href="chapitre-temps.html#pour-terminer"><i class="fa fa-check"></i><b>12.4</b> Pour terminer…</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="chapitre-geo.html"><a href="chapitre-geo.html"><i class="fa fa-check"></i><b>13</b> Les données géospatiales</a><ul>
<li class="chapter" data-level="13.1" data-path="chapitre-geo.html"><a href="chapitre-geo.html#les-données-spatiales"><i class="fa fa-check"></i><b>13.1</b> Les données spatiales</a></li>
<li class="chapter" data-level="13.2" data-path="chapitre-geo.html"><a href="chapitre-geo.html#cartographier-avec-le-module-ggmap"><i class="fa fa-check"></i><b>13.2</b> Cartographier avec le module <strong><code>ggmap</code></strong></a></li>
<li class="chapter" data-level="13.3" data-path="chapitre-geo.html"><a href="chapitre-geo.html#types-génériques-de-données-spatiales"><i class="fa fa-check"></i><b>13.3</b> Types génériques de données spatiales</a></li>
<li class="chapter" data-level="13.4" data-path="chapitre-geo.html"><a href="chapitre-geo.html#les-choroplèthe"><i class="fa fa-check"></i><b>13.4</b> Les choroplèthe</a></li>
<li class="chapter" data-level="13.5" data-path="chapitre-geo.html"><a href="chapitre-geo.html#les-rasters"><i class="fa fa-check"></i><b>13.5</b> Les rasters</a></li>
<li class="chapter" data-level="13.6" data-path="chapitre-geo.html"><a href="chapitre-geo.html#autoapprentissage-spatial"><i class="fa fa-check"></i><b>13.6</b> Autoapprentissage spatial</a></li>
<li class="chapter" data-level="13.7" data-path="chapitre-geo.html"><a href="chapitre-geo.html#les-objets-spatialisés-en-r"><i class="fa fa-check"></i><b>13.7</b> Les objets spatialisés en R</a><ul>
<li class="chapter" data-level="13.7.1" data-path="chapitre-geo.html"><a href="chapitre-geo.html#données-vectorielles-points-lignes-et-polygones"><i class="fa fa-check"></i><b>13.7.1</b> Données vectorielles (points, lignes et polygones)</a></li>
<li class="chapter" data-level="13.7.2" data-path="chapitre-geo.html"><a href="chapitre-geo.html#données-raster"><i class="fa fa-check"></i><b>13.7.2</b> Données raster</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="chapitre-geo.html"><a href="chapitre-geo.html#section-systeme-coord"><i class="fa fa-check"></i><b>13.8</b> Les systèmes de coordonnées</a></li>
<li class="chapter" data-level="13.9" data-path="chapitre-geo.html"><a href="chapitre-geo.html#manipuler-des-tableaux-sf"><i class="fa fa-check"></i><b>13.9</b> Manipuler des tableaux <code>sf</code></a></li>
<li class="chapter" data-level="13.10" data-path="chapitre-geo.html"><a href="chapitre-geo.html#manipuler-des-objets-raster"><i class="fa fa-check"></i><b>13.10</b> Manipuler des objets raster</a></li>
<li class="chapter" data-level="13.11" data-path="chapitre-geo.html"><a href="chapitre-geo.html#graphiques-dobjets-spatialisés"><i class="fa fa-check"></i><b>13.11</b> Graphiques d’objets spatialisés</a></li>
<li class="chapter" data-level="13.12" data-path="chapitre-geo.html"><a href="chapitre-geo.html#ressources-complémentaires"><i class="fa fa-check"></i><b>13.12</b> Ressources complémentaires</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="chapitre-ode.html"><a href="chapitre-ode.html"><i class="fa fa-check"></i><b>14</b> Modélisation de mécanismes écologiques</a><ul>
<li class="chapter" data-level="14.1" data-path="chapitre-ode.html"><a href="chapitre-ode.html#équations-différentielles"><i class="fa fa-check"></i><b>14.1</b> Équations différentielles</a></li>
<li class="chapter" data-level="14.2" data-path="chapitre-ode.html"><a href="chapitre-ode.html#les-équations-différentielles-ordinaires-en-modélisation-écologique"><i class="fa fa-check"></i><b>14.2</b> Les équations différentielles ordinaires en modélisation écologique</a><ul>
<li class="chapter" data-level="14.2.1" data-path="chapitre-ode.html"><a href="chapitre-ode.html#évolution-dune-seule-population-en-fonction-du-temps"><i class="fa fa-check"></i><b>14.2.1</b> Évolution d’une seule population en fonction du temps</a></li>
<li class="chapter" data-level="14.2.2" data-path="chapitre-ode.html"><a href="chapitre-ode.html#population-exploitée"><i class="fa fa-check"></i><b>14.2.2</b> Population exploitée</a></li>
<li class="chapter" data-level="14.2.3" data-path="chapitre-ode.html"><a href="chapitre-ode.html#interactions-biologiques"><i class="fa fa-check"></i><b>14.2.3</b> Interactions biologiques</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analyse et modélisation d’agroécosystèmes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapitre-visualisation" class="section level1">
<h1><span class="header-section-number">4</span> Visualisation</h1>
<hr />
<p>️ <strong>Objectifs spécifiques</strong>:</p>
<p>À la fin de ce chapitre, vous</p>
<ul>
<li>comprendrez l’importance de l’exploration des données</li>
<li>comprendrez les guides généraux pour créer un graphique approprié</li>
<li>comprendrez la différence entre les modes impératifs et déclaratifs pour la création de graphique</li>
<li>serez en mesure de créer des nuages de points, lignes, histogrammes, diagrammes en barres et boxplots en R</li>
<li>saurez exporter un graphique en vue d’une publication</li>
</ul>
<hr />
<p>Reconnaissez-vous cette image (figure <a href="chapitre-visualisation.html#fig:vis-hockey-stick">4.1</a>)?</p>
<div class="figure" style="text-align: center"><span id="fig:vis-hockey-stick"></span>
<img src="images/03_mann-hockey-stick-2001.png" alt="Le bâton de hocket de Mann et al. (2001) Source: [GIEC, Bilan 2001 des changements climatiques : Les éléments scientifiques](https://www.ipcc.ch/pdf/climate-changes-2001/scientific-basis/scientific-spm-ts-fr.pdf))" width="100%" />
<p class="caption">
Figure 4.1: Le bâton de hocket de Mann et al. (2001) Source: <a href="https://www.ipcc.ch/pdf/climate-changes-2001/scientific-basis/scientific-spm-ts-fr.pdf">GIEC, Bilan 2001 des changements climatiques : Les éléments scientifiques</a>)
</p>
</div>
<p>Elle a été conçue par Michael E. Mann, Raymond S. Bradley et Malcolm K. Hughes. Le graphique montre l’évolution des températures en °C normalisées selon la température moyenne entre 1961 et 1990 sur l’axe des Y en fonction du temps, sur l’axe des X. On le connait aujourd’hui comme le <em>bâton de hockey</em>, et on reconnait son rôle clé pour sensibiliser la civilisation entière face au réchauffement global.</p>
<p>Créer des graphiques est une tâche courante dans un flux de travail en science. Un graphique bien conçu est dense en information. La visualisation des données permet d’explorer des tableaux jusqu’à créer des éléments visuels voués à la publication, dont l’information serait autrement difficile, voire impossible à transmettre adéquatement.</p>
<div id="pourquoi-explorer-graphiquement" class="section level2">
<h2><span class="header-section-number">4.1</span> Pourquoi explorer graphiquement?</h2>
<p>La plupart des graphiques que vous générerez ne seront pas destinés à être publiés. Ils viseront probablement d’abord à explorer des données. Cela vous permettra de mettre en évidence de nouvelles perspectives.</p>
<p>Prenons par exemple deux variables, <span class="math inline">\(X\)</span> et <span class="math inline">\(Y\)</span>. Vous calculez leur moyenne, écart-type et la corrélation entre les deux variables (nous verrons les statistiques en plus de détails dans un prochain chapitre).</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" title="1"><span class="kw">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</a>
<a class="sourceLine" id="cb174-2" title="2">datasaurus &lt;-<span class="st"> </span><span class="kw">read_tsv</span>(<span class="st">&quot;data/DatasaurusDozen.tsv&quot;</span>)</a>
<a class="sourceLine" id="cb174-3" title="3"></a>
<a class="sourceLine" id="cb174-4" title="4">cor_datasaurus &lt;-<span class="st"> </span>datasaurus <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb174-5" title="5"><span class="st">  </span><span class="kw">group_by</span>(dataset) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb174-6" title="6"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cor =</span> <span class="kw">cor</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y, <span class="dt">method =</span> <span class="st">&quot;pearson&quot;</span>))</a>
<a class="sourceLine" id="cb174-7" title="7"></a>
<a class="sourceLine" id="cb174-8" title="8">datasaurus <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb174-9" title="9"><span class="st">  </span><span class="kw">group_by</span>(dataset) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb174-10" title="10"><span class="st">  </span><span class="kw">summarise_all</span>(<span class="kw">list</span>(<span class="dt">mean =</span> mean, <span class="dt">sd =</span> sd)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb174-11" title="11"><span class="st">  </span><span class="kw">left_join</span>(cor_datasaurus, <span class="dt">by =</span> <span class="st">&quot;dataset&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 13 x 6
##    dataset    x_mean y_mean  x_sd  y_sd     cor
##    &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
##  1 away         54.3   47.8  16.8  26.9 -0.0641
##  2 bullseye     54.3   47.8  16.8  26.9 -0.0686
##  3 circle       54.3   47.8  16.8  26.9 -0.0683
##  4 dino         54.3   47.8  16.8  26.9 -0.0645
##  5 dots         54.3   47.8  16.8  26.9 -0.0603
##  6 h_lines      54.3   47.8  16.8  26.9 -0.0617
##  7 high_lines   54.3   47.8  16.8  26.9 -0.0685
##  8 slant_down   54.3   47.8  16.8  26.9 -0.0690
##  9 slant_up     54.3   47.8  16.8  26.9 -0.0686
## 10 star         54.3   47.8  16.8  26.9 -0.0630
## 11 v_lines      54.3   47.8  16.8  26.9 -0.0694
## 12 wide_lines   54.3   47.8  16.8  26.9 -0.0666
## 13 x_shape      54.3   47.8  16.8  26.9 -0.0656</code></pre>
<p>Les moyennes, écarts-types et corrélations sont à peu près les mêmes pour tous les groupes. Peut-on conclure que tous les groupes sont semblables? Pas encore.</p>
<p>Pour démontrer que ces statistiques ne vous apprendront pas grand chose sur la structure des données, <a href="https://www.autodeskresearch.com/publications/samestats">Matejka et Fitzmaurice (2017)</a> ont généré 12 jeux de données <span class="math inline">\(X\)</span> et <span class="math inline">\(Y\)</span>, ayant chacun pratiquement les mêmes statistiques. Mais avec des structures bien différentes (figure <a href="chapitre-visualisation.html#fig:vis-datasaurus-gif">4.2</a>)!</p>
<div class="figure" style="text-align: center"><span id="fig:vis-datasaurus-gif"></span>
<img src="images/04_DinoSequentialSmaller.gif" alt="Animation montrant la progression du jeu de données *Datasaurus* pour toutes les formes visées. Source: [Same Stats, Different Graphs: Generating Datasets with Varied Appearance and Identical Statistics through Simulated Annealing](https://www.autodeskresearch.com/publications/samestats)" width="100%" />
<p class="caption">
Figure 4.2: Animation montrant la progression du jeu de données <em>Datasaurus</em> pour toutes les formes visées. Source: <a href="https://www.autodeskresearch.com/publications/samestats">Same Stats, Different Graphs: Generating Datasets with Varied Appearance and Identical Statistics through Simulated Annealing</a>
</p>
</div>
</div>
<div id="publier-un-graphique" class="section level2">
<h2><span class="header-section-number">4.2</span> Publier un graphique</h2>
<p>Vous voilà sensibilisé à l’importance d’explorer les données graphiquement. Mais ce qui ultimement émanera d’un projet sera le rapport que vous déposerez, l’article scientifique que vous ferez publier ou le billet de blogue que vous partagerez su les réseaux sociaux. Les graphiques inclus dans vos publications méritent une attention particulière pour que votre audience puisse comprendre les découvertes et perspectives offertes par vos travaux. Pour ce faire, un graphique doit répondre honnêtement à la question posée tout en étant attrayant.</p>
<div id="cinq-qualités-dun-bon-graphique" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Cinq qualités d’un bon graphique</h3>
<p>Alberto Cairo, chercheur spécialisé en visualisation de données, a fait paraître en 2016 le livre <a href="http://www.thefunctionalart.com/p/the-truthful-art-book.html"><em>The Truthful art</em></a>, note cinq qualités d’une visualisation bien conçue (les citations de cette section proviennent de ma traduction de Alberto Cairo, <em>The Truthful Art</em> (2016), p. 45.).</p>
<blockquote>
<p>1- <strong>Elle est véritable</strong>, puisqu’elle est basée sur une recherche exhaustive et honnête.</p>
</blockquote>
<p>Cela vaut autant pour les graphiques que pour l’analyse de données. Il s’agit froidement de <strong>présenter les données selon l’interprétation la plus exacte</strong>. Les pièges à éviter sont le <em>picorage de cerises</em> et la <em>surinterprétation des données</em>. Le <em>picorage</em>, c’est lorsqu’on réduit les perspectives afin de soutenir un argumentaire. Par exemple, retirer des données d’une région ou d’une décennie qui rendraient factice une conclusion fixée <em>a priori</em>. Ceci vaut autant pour les graphiques que pour les statistiques (nous parlerons du p-hacking au prochain chapitre). La <em>surinterprétation</em>, c’est lorsque l’on saute rapidement aux conclusions: par exemple, que l’on génère des corrélations, voire même des relations de causalités à partir de ce qui n’est que du bruit de fond. À ce titre, lors <a href="https://youtu.be/uw1Tag08dK4">d’une conférence</a>, Heather Krause insiste sur l’importance de faire en sorte que les représentations graphiques répondent correctement aux questions posées dans une étude (figure <a href="chapitre-visualisation.html#fig:vis-conference-2018">4.3</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:vis-conference-2018"></span>
<img src="images/03_Heather-Krause_youtube_.png" alt="The F word: Protect your work from four hidden fallacies when working with data, une [conférence de Heather Krause, 2018](https://youtu.be/uw1Tag08dK4)" width="100%" />
<p class="caption">
Figure 4.3: The F word: Protect your work from four hidden fallacies when working with data, une <a href="https://youtu.be/uw1Tag08dK4">conférence de Heather Krause, 2018</a>
</p>
</div>
<blockquote>
<p>2- <strong>Elle est fonctionnelle</strong>, puisqu’elle constitue une représentation précise des données, et qu’elle est construite de manière à laisser les observateurs.trices prendre des initiatives conséquentes.</p>
</blockquote>
<p>“La seule chose qui est pire qu’un diagramme en pointe de tarte, c’est d’en présenter plusieurs” (Edward Tufte, designer, cité par Alberto Cairo, 2016, p. 50). Choisir le bon graphique pour représenter vos données est beaucoup moins une question de bon goût qu’<strong>une question de démarche rationnelle sur l’objectif visé par la présentation d’un graphique</strong>. Je présenterai des lignes guides pour sélectionner le type de graphique qui présentera vos données de manière fonctionnelle en fonction de l’objectif d’un graphique (d’ailleurs, avez-vous vraiment besoin d’un graphique?).</p>
<blockquote>
<p>3- <strong>Elle est attrayante</strong> et intrigante, et même esthétiquement plaisante pour l’audience visée - les scientifiques d’abord, mais aussi le public en général.</p>
</blockquote>
<p>En sciences naturelles, la pensée rationnelle, la capacité à organiser la connaissance et créer de nouvelles avenues sont des qualités qui sont privilégiées au talent artistique. <strong>Que vous ayez où non des aptitudes en art visuel, présentez de l’information, pas des décorations</strong>. Excel vous permet d’ajouter une perspective 3D à un diagramme en barres. La profondeur contient-elle de l’information? Non. Cette décoration ne fait qu’ajouter de la confusion. Minimalisez, fournissez le plus d’information possible avec le moins d’éléments graphiques possibles. C’est ce que vous proposent les guides graphiques que j’introduirai plus loin.</p>
<blockquote>
<p>4- <strong>Elle est pertinente</strong>, puisqu’elle révèle des évidences scientifiques autrement difficilement accessibles.</p>
</blockquote>
<p>Il s’agit de susciter un <em>eurêka</em>, dans le sens qu’<strong>elle génère une idée, et parfois une initiative, en un coup d’œil</strong>. Le graphique en bâton de hockey est un exemple où l’on a spontanément une idée de la situation. Cette situation peut être la présence d’un phénomène comme l’augmentation de la température globale, mais aussi l’absence de phénomènes pourtant attendus.</p>
<blockquote>
<p>5- <strong>Elle est instructive</strong>, parce que si l’on saisit et accepte les évidences scientifiques qu’elle décrit, cela changera notre perception pour le mieux.</p>
</blockquote>
<p>En présentant cette qualité, Alberto Cairo voulait insister ses lecteurs.trices à choisir des sujets de discussion visuelle de manière à participer à un monde meilleur. En ce qui nous concerne, il s’agit de bien <strong>sélectionner l’information que l’on désire transmettre</strong>. Imaginez que vous avez travaillé quelques jours pour créer un graphique, sont vous êtes fier, mais vous (ou un collègue hiérarchiquement favorisé) vous rendez compte que le graphique soutient peu ou pas le propos ou l’objectif de votre thèse/mémoire/rapport/article. Si c’est bien le cas, vous feriez mieux de laisser tomber votre oeuvre et considérer votre démarche comme une occasion d’apprentissage.</p>
<p>Alberto Cairo résume son livre <em>The Truthful Art</em> dans <a href="http://news.nationalgeographic.com/2015/10/151016-data-points-alberto-cairo-interview/">une entrevue avec le National Geographic</a>.</p>
</div>
</div>
<div id="choisir-le-type-de-graphique-le-plus-approprié" class="section level2">
<h2><span class="header-section-number">4.3</span> Choisir le type de graphique le plus approprié</h2>
<p>De nombreuses manières de présenter les données sont courrament utilisées, comme les nuages de point, les lignes, les histogrammes, les diagrammes en barre et en pointe de tarte. Les principaux types de graphique seront couverts dans ce chapitre. D’autres types spécialisés seront couverts dans les chapitres appropriés (graphiques davantage orientés vers les statistiques, les biplots, les dendrogrammes, les diagrammes ternaires, les cartes, etc.).</p>
<p>La visualisation de données est aujourd’hui devenue un métier pour plusieurs personnes ayant des affinités pour la science, les arts et la communication, dont certaines partagent leur expertise sur le web. À ce titre, le site <a href="https://www.data-to-viz.com/"><em>from data to viz</em></a> est à conserver dans vos marques-page. Il comprend des arbres décisionnels qui vous guident vers les options appropriées pour présenter vos données, puis fournissent des exemples pour produire ces visualisations en R. Également, je suggère le <a href="https://annkemery.com/essentials/">site internet de Ann K. Emery</a>, qui présente des lignes guide pour présenter le graphique adéquat selon les données en main. De nombreuses recettes sont également proposées sur <a href="https://www.r-graph-gallery.com/">r-graph-gallery.com</a>. En ce qui a trait aux couleurs, le choix n’est pas anodin. Si vous avez le souci des détails sur les éléments esthétiques de vos graphiques, je recommande la lecture de ce billet de blog de <a href="https://blog.datawrapper.de/colors/">Lisa Charlotte Rost</a>.</p>
<p>Retenez néanmois que <em>La couleur est une information</em>. Les couleurs devraient être sélectionnées d’abord pour être lisibles par les personnes ne percevant pas les couleurs (figure <a href="chapitre-visualisation.html#fig:vis-colorbrewer">4.4</a>), selon le support (apte à être photocopié, lisible à l’écran, lisible sur des documents imprimés en noir et blanc) et selon le type de données.</p>
<ul>
<li>Données continues ou catégorielles ordinales: gradient (transition graduelle d’une couleur à l’autre), séquence (transition saccadée selon des groupes de données continues) ou divergentes (transition saccadée d’une couleur à l’autre vers des couleurs divergentes, par exemple orange vers blanc vers bleu).</li>
<li>Données catégorielles nominales: couleurs éloignées d’une catégorie à une autre (plus il y a de catégories, plus les couleurs sont susceptibles de se ressembler).</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:vis-colorbrewer"></span>
<img src="images/03_colorbrewer2.png" alt="Capture d'écran de [colorbrewer2.org](http://colorbrewer2.org), qui propose des palettes de couleurs pour créer des cartes, mais l'information est pertinente pour tout type de graphique." width="30%" />
<p class="caption">
Figure 4.4: Capture d’écran de <a href="http://colorbrewer2.org">colorbrewer2.org</a>, qui propose des palettes de couleurs pour créer des cartes, mais l’information est pertinente pour tout type de graphique.
</p>
</div>
<p>Le <a href="https://ft.com/vocabulary">Financial Times</a> offre également ce guide visuel (figure <a href="chapitre-visualisation.html#fig:vis-guide-ft">4.5</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:vis-guide-ft"></span>
<img src="images/03_poster.png" alt="Guide de sélection de grapjhique du [Financial Times](https://ft.com/vocabulary)" width="100%" />
<p class="caption">
Figure 4.5: Guide de sélection de grapjhique du <a href="https://ft.com/vocabulary">Financial Times</a>
</p>
</div>
<p>Cairo (2016) propose de procéder avec ces étapes:</p>
<ol style="list-style-type: decimal">
<li>Réfléchissez au message que vous désirez transmettre: comparer les catégories <span class="math inline">\(A\)</span> et <span class="math inline">\(B\)</span>, visualiser une transition ou un changement de <span class="math inline">\(A\)</span> vers <span class="math inline">\(B\)</span>, présenter une relation entre <span class="math inline">\(A\)</span> et <span class="math inline">\(B\)</span> ou la distribution de <span class="math inline">\(A\)</span> et <span class="math inline">\(B\)</span> sur une carte.</li>
<li>Essayez différentes représentations: si le message que vous désirez transmettre a plusieurs volets, il se pourrait que vous ayez besoin de plus d’un graphique.</li>
<li>Mettez de l’ordre dans vos données. C’était le sujet du chapitre <a href="chapitre-tableaux.html#chapitre-tableaux">3</a>.</li>
<li>Testez le résultat. “Hé, qu’est-ce que tu comprends de cela?” Si la personne hausse les épaules, il va falloir réévaluer votre stratégie.</li>
</ol>
</div>
<div id="choisir-son-outil-de-visualisation" class="section level2">
<h2><span class="header-section-number">4.4</span> Choisir son outil de visualisation</h2>
<p>Les modules et logiciels de visualisation sont basés sur des approches que l’on pourrait placer sur un spectre allant de l’impératif au déclaratif.</p>
<div id="approche-impérative" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Approche impérative</h3>
<p>Selon cette approche, vous indiquez comment placer l’information dans un espace graphique. Vous indiquer les symboles, les couleurs, les types de ligne, etc. Peu de choses sont automatisées, ce qui laisse une grande flexibilité, mais demande de vouer beaucoup d’énergie à la manière de coder pour obtenir le graphique désiré. Le module graphique de Excel, ainsi que le module graphique de base de <code>R</code>, utilisent des approches impératives.</p>
</div>
<div id="approche-déclarative" class="section level3">
<h3><span class="header-section-number">4.4.2</span> Approche déclarative</h3>
<p>Les stratégies d’automatisation graphique se sont grandement améliorées au cours des dernières années. Plutôt que de vouer vos énergies à créer un graphique, il est maintenant possible de spécifier ce que l’on veut présenter.</p>
<blockquote>
<p>La visualisation déclarative vous permet de penser aux données et à leurs relations, plutôt que des détails accessoires.</p>
<p><a href="https://www.youtube.com/watch?v=FytuB8nFHPQ"><em>Jake Vanderplas, Declarative Statistical Visualization in Python with Altair</em></a> (ma traduction)</p>
</blockquote>
<p>L’approche déclarative passe souvent par une <em>grammaire graphique</em>, c’est-à-dire un langage qui explique ce que l’on veut présenter - en mode impératif, on spécifie plutôt comment on veut présenter les données. Le module <strong><code>ggplot2</code></strong> est le module déclaratif par excellence en R.</p>
</div>
</div>
<div id="visualisation-en-r" class="section level2">
<h2><span class="header-section-number">4.5</span> Visualisation en R</h2>
<p>En R, votre trousse d’outils de visualisation mériterait de comprendre les modules suivants.</p>
<ul>
<li><strong><code>base</code></strong>. Le module de base de R contient des fonctions graphique très polyvalentes. Les axes sont générées automatiquement, on peut y ajouter des titres et des légendes, on peut créer plusieurs graphiques sur une même figure, on peut y ajouter différentes géométries (points, lignes et polygones), avec différents types de points ou de trait, et différentes couleurs, etc. Les modules spécialisés viennent souvent avec leurs graphiques spécialisés, construit à partir du module de base. En tant que module graphique impératif, on peut tout faire ou presque (pas d’interactivité), mais l’écriture du code est peut expressive.</li>
<li><strong><code>ggplot2</code></strong>. C’est le module graphique par excellence en R (et j’ose dire: en calcul scientifique). <strong><code>ggplot2</code></strong> se base sur une grammaire graphique. À partir d’un tableau de données, une colonne peut définir l’axe des x, une autre l’axe des y, une autre la couleur couleur des points ou leur dimension. Une autre colonne définissant des catégories peut segmenter la visualisation en plusieurs graphiques alignés horizontalement ou verticalement. Des extensions de <strong><code>ggplot2</code></strong> permettent de générer des cartes (ggmap), des diagrammes ternaires (ggtern), des animations (gganimate), etc.</li>
<li><strong><code>plotly</code></strong>. plotly est un module graphique particulièrement utile pour générer des graphiques interactifs. plotly offre une fonction toute simple pour rendre interactif un graphique <strong><code>ggplot2</code></strong>.</li>
</ul>
<p>Nous survolerons rapidement le module de base, irons plus en profondeur avec <strong><code>ggplot2</code></strong>, puis je présenterai brièvement les graphiques interactifs avec plotly.</p>
</div>
<div id="module-de-base-pour-les-graphiques" class="section level2">
<h2><span class="header-section-number">4.6</span> Module de base pour les graphiques</h2>
<p>Nous allons d’abord survoler le module de base, en mode impératif. La fonction de base pour les graphiques en R est <code>plot()</code>. Pour nous exercer avec cette fonction, chargeons d’abord le tableau de données d’exercice <a href="https://en.wikipedia.org/wiki/Iris_flower_data_set"><code>iris</code></a>, publié en 1936 par le célèbre biostatisticien Ronald Fisher.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" title="1"><span class="kw">data</span>(<span class="st">&quot;iris&quot;</span>)</a>
<a class="sourceLine" id="cb176-2" title="2"><span class="kw">head</span>(iris)</a></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Le tableau <code>iris</code> contient 5 colonnes, les 4 premières décrivant les longueurs et largeurs des pétales et sépales de différentes espèces d’iris dont le nom apparaît à la 5ième colonne. La manière la plus rapide d’extraire une colonne d’un tableau est d’appeler le tableau, suivit du <code>$</code>, puis du nom de la colonne, par exemple <code>iris$Species</code>. Pour générer un graphique avec la fonction <code>plot()</code>:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" title="1"><span class="kw">plot</span>(iris<span class="op">$</span>Sepal.Length, iris<span class="op">$</span>Petal.Length)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-plot-iris-1.png" width="672" /></p>
<p>Par défaut, le premier argument est le vecteur définissant l’axe des x et le deuxième est celui définissant l’axe des y. Vous rencontrerez souvent de telles utilisations d’arguments implicites, mais je préfère être explicite en définissant bien les arguments: <code>plot(x = iris$Sepal.Length, y = iris$Petal.Length)</code>. Le graphique précédent peut être amplement personnalisé en utilisant différents arguments (figure <a href="chapitre-visualisation.html#fig:vis-plot-iris-elements">4.6</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:vis-plot-iris-elements"></span>
<img src="images/03_plot-iris.png" alt="Éléments personnalisables d'un graphique de base," width="789" />
<p class="caption">
Figure 4.6: Éléments personnalisables d’un graphique de base,
</p>
</div>
<p><strong>Exercice</strong>. Utilisez ces arguments dans la cellule de code de la figure <code>plot(iris$Sepal.Length, iris$Petal.Length)</code>.</p>
<p>Remarquez que la fonction a décidé toute seule de créer un nuage de point. La fonction plot() est conçue pour créer le graphique approprié selon le type des données spécifiées: lignes, boxplot, etc. Si l’on spécifiait les espèces comme argument <code>x</code>:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" title="1"><span class="kw">plot</span>(<span class="dt">x =</span> iris<span class="op">$</span>Species, <span class="dt">y =</span> iris<span class="op">$</span>Petal.Length)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-plot-iris-xyscatter-1.png" width="672" /></p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" title="1"><span class="co"># ou bien</span></a>
<a class="sourceLine" id="cb180-2" title="2"><span class="co"># iris %&gt;%</span></a>
<a class="sourceLine" id="cb180-3" title="3"><span class="co">#   select(Species, Petal.Length) %&gt;%</span></a>
<a class="sourceLine" id="cb180-4" title="4"><span class="co">#   plot()</span></a></code></pre></div>
<p>De même, la fonction <code>plot()</code> appliquée à un tableau de données générera une représentation bivariée.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" title="1"><span class="kw">plot</span>(iris)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-plot-bivariate-1.png" width="672" /></p>
<p>Il est possible d’encoder des attributs grâce à des vecteurs de facteurs (catégories).</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" title="1"><span class="kw">plot</span>(iris, <span class="dt">col =</span> iris<span class="op">$</span>Species)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-plot-bivariate-col-1.png" width="672" /></p>
<p>L’argument <code>type = ""</code> permet de personnaliser l’apparence:</p>
<ul>
<li><code>type = "p"</code>: points</li>
<li><code>type = "l"</code>: ligne</li>
<li><code>type = "o"</code> et <code>type = "b"</code>: ligne et points</li>
<li><code>type = "n"</code>: ne rien afficher</li>
</ul>
<p>Créons un jeu de données.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb183-1" title="1">time &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">100</span>, <span class="dt">by =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb183-2" title="2">height &lt;-<span class="st"> </span><span class="kw">abs</span>(time <span class="op">*</span><span class="st"> </span><span class="fl">0.1</span> <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="kw">length</span>(time), <span class="dv">0</span>, <span class="dv">2</span>)) <span class="co"># abs pourvaleur absolue (changement de signe si négatif)</span></a>
<a class="sourceLine" id="cb183-3" title="3"><span class="kw">plot</span>(<span class="dt">x =</span> time, <span class="dt">y =</span> height, <span class="dt">type =</span> <span class="st">&quot;b&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>, <span class="dt">lwd =</span> <span class="dv">1</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-plot-tybe-b-1.png" width="672" /></p>
<p>Le type de ligne est spécifié par l’argument <code>lty</code> (qui peut prendre un chiffre ou une châine de caractères, i.e. <code>1</code> est équivalent de <code>"solid"</code>, <code>2</code> de <code>"dashed"</code>, <code>3</code> de <code>"dotted"</code>, etc.) et la largeur du trait (valeur numérique), par l’argument <code>lwd</code>.</p>
<p>La fonction <code>hist()</code> permet quant à elle de créer des histogrammes. Parmi ses arguments, <code>breaks</code> est particulièrement utile, car il permet d’ajuster la segmentation des incréments.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" title="1"><span class="kw">hist</span>(iris<span class="op">$</span>Petal.Length, <span class="dt">breaks =</span> <span class="dv">60</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-plot-hist-1.png" width="672" /></p>
<p><strong>Exercice</strong>. Ajustez le titre de l’axe des x, ainsi que les limites de l’axe des x. Êtes-vous en mesure de colorer l’intérieur des barres en bleu?</p>
<p>La fonction <code>plot()</code> peut être suivie de plusieurs autres couches comme des lignes (<code>lines()</code> ou <code>abline()</code>), des points (<code>points()</code>), du texte (<code>text()</code>), des polygones (<code>polygon()</code>, des légendes (<code>legend()</code>)), etc. On peut aussi personnaliser les couleurs, les types de points, les types de lignes, etc. L’exemple suivant ajoute une ligne au graphique. Ne prêtez pas trop attention aux fonctions <code>predict()</code> et <code>lm()</code> pour l’instant: nous les verrons au chapitre <a href="chapitre-biostats.html#chapitre-biostats">6</a>.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" title="1"><span class="kw">plot</span>(<span class="dt">x =</span> time, <span class="dt">y =</span> height)</a>
<a class="sourceLine" id="cb185-2" title="2"><span class="kw">lines</span>(<span class="dt">x =</span> time, <span class="dt">y =</span> <span class="kw">predict</span>(<span class="kw">lm</span>(height <span class="op">~</span><span class="st"> </span>time)))</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-plot-pred-1.png" width="672" /></p>
<p>Pour exporter un graphique, vous pouvez passer par le menu Export de RStudio. Mais pour des graphiques destinés à être publiés, je vous suggère d’exporter vos graphiques avec une haute résolution à la suite de la commande <code>png()</code> (ou <code>jpg()</code> ou <code>svg()</code>).</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" title="1"><span class="kw">svg</span>(<span class="dt">filename =</span> <span class="st">&quot;images/mon-graphique.svg&quot;</span>, <span class="dt">width =</span> <span class="dv">3000</span>, <span class="dt">height =</span> <span class="dv">2000</span>)</a>
<a class="sourceLine" id="cb186-2" title="2"><span class="co"># png(filename = &#39;images/mon-graphique.png&#39;, width = 3000, height=2000, res=300)</span></a>
<a class="sourceLine" id="cb186-3" title="3"><span class="kw">plot</span>(</a>
<a class="sourceLine" id="cb186-4" title="4">  <span class="dt">x =</span> iris<span class="op">$</span>Petal.Length,</a>
<a class="sourceLine" id="cb186-5" title="5">  <span class="dt">y =</span> iris<span class="op">$</span>Sepal.Length,</a>
<a class="sourceLine" id="cb186-6" title="6">  <span class="dt">col =</span> iris<span class="op">$</span>Species,</a>
<a class="sourceLine" id="cb186-7" title="7">  <span class="dt">cex =</span> <span class="dv">3</span>, <span class="co"># dimension des points</span></a>
<a class="sourceLine" id="cb186-8" title="8">  <span class="dt">pch =</span> <span class="dv">16</span></a>
<a class="sourceLine" id="cb186-9" title="9">) <span class="co"># type de points</span></a>
<a class="sourceLine" id="cb186-10" title="10"><span class="kw">dev.off</span>()</a></code></pre></div>
<pre><code>## png 
##   2</code></pre>
<p>Le format svg crée une version vectorielle du graphique, c’est-à-dire que l’image exportée est un fichier contenant les formes, non pas les pixels. Cela vous permet d’éditer votre graphique dans un logiciel de dessin vectoriel (comme <a href="https://inkscape.org/">Inkscape</a>).</p>
<p>Dans le bloc de code précédent, j’ai mis en commentaire (<code># ...</code>) le format d’image <em>png</em>, utile pour les images de type graphique, avec des changements de couleurs drastiques. J’y ai spécifié une haute résolution, à 300 pixels par pouce. Pour les photos, vous préférerez le format <em>jpg</em>. Des éditeurs demanderont peut-être des formats vectoriels comme <em>pdf</em> ou <em>eps</em>. Si vous ne trouvez pas de moyen de modifier un aspect du graphique dans le code (bouger des étiquettes ou des légendes, ajouter des éléments graphiques), vous pouvez exporter votre graphique en format svg et éditer votre graphique dans <a href="https://inkscape.org/">Inkscape</a>.</p>
<p>Le module de base de R comprend une panoplie d’autres particularités que je ne couvrirai pas ici, en faveur du module <strong><code>ggplot2</code></strong>.</p>
</div>
<div id="la-grammaire-graphique-ggplot2" class="section level2">
<h2><span class="header-section-number">4.7</span> La grammaire graphique <strong><code>ggplot2</code></strong></h2>
<p>Le module <strong><code>esquisse</code></strong> est une extension de RStudio permettant de générer du code pour le module graphique <strong><code>ggplot2</code></strong>. La vidéo suivant, où j’utilise <strong><code>esquisse</code></strong>, montre ce en quoi consiste une grammaire graphique.</p>
<video width="480" height="320" controls="controls">
<source src="images/03_esquisse.mp4" type="video/mp4">
</video>
<p>Chaque colonne est un élément graphique et peut être encodé pour former la position en x, en y, la taille des points, leur couleur, ou même le panneau (facet). Mais quelle forme prendra le bidule positionner? Des points, lignes, boxplots, barres? C’est ce que défini une grammaire graphique. Brièvement, une grammaire graphique permet de schématiser des données avec des marqueurs (points, lignes, etc.) sur des attributs visuels (couleurs, dimension, forme). Cette approche permet de dégager 5 composantes.</p>
<ol style="list-style-type: decimal">
<li><strong>Les données</strong>. Votre tableau est bien sûr un argument nécessaire pour générer le graphique.</li>
<li><strong>Les marqueurs</strong>. Un terme abstrait pour désigner les points, les lignes, les polygones, les barres, les flèches, etc. En <strong><code>ggplot2</code></strong>, ce sont des <em>géométries</em>, par exemple <code>geom_point()</code> pour définir une géométrie de points.</li>
<li><strong>Les attributs encodés</strong>. La position, la dimension, la couleur ou la forme que prendront les géométries. En <strong><code>ggplot2</code></strong>, on les nomme les <em>aesthetics</em>.</li>
<li><strong>Les attributs globaux</strong>. Les attributs sont globaux lorsqu’ils sont constant (ils ne dépendent pas d’une variable). Les valeurs par défaut conviennent généralement, mais certains attributs peuvent être spécifiés: par exemple la forme ou la couleur des points, le type de ligne, etc.</li>
<li><strong>Les thèmes</strong>. Le thème du graphique permet de personnalisé la manière dont le graphique est rendu. Il existe des thèmes prédéfinis, que vous pouvez ajuster, mais il est possible de créer vos propres thèmes (nous ne couvrirons pas cela dans ce cours).</li>
</ol>
<div class="figure" style="text-align: center"><span id="fig:vis-allisonhorst-ggplot-art"></span>
<img src="images/03_ggplot2_masterpiece.png" alt="Créer une oeuvre d'art avec **`ggplot2`**, dessin de [@allison_horst](https://twitter.com/allison_horst)." width="100%" />
<p class="caption">
Figure 4.7: Créer une oeuvre d’art avec <strong><code>ggplot2</code></strong>, dessin de <span class="citation">[@allison_horst]</span>(<a href="https://twitter.com/allison_horst" class="uri">https://twitter.com/allison_horst</a>).
</p>
</div>
<p>Le flux de travail pour créer un graphique à partir d’une grammaire ressemble donc à ceci:</p>
<pre><code>Avec mon tableau,
Créer un marqueur (
encoder(position X = colonne A,
position Y = colonne B,
couleur = colonne C),
forme globale = 1)
Avec un thème noir et blanc</code></pre>
<p>Le module <strong><code>tidyverse</code></strong> installera des modules utilisés de manière récurrente dans ce cours, comme <strong><code>ggplot2</code></strong>, <strong><code>dplyr</code></strong>, <strong><code>tidyr</code></strong> et <strong><code>readr</code></strong>. Je recommande de le charger au début de vos sessions de travail.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" title="1"><span class="kw">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</a></code></pre></div>
<p>L’approche <em>tidyverse</em> est une grammaire des données. Le module <strong><code>ggplot2</code></strong>, qui en fait partie, est une <em>grammaire graphique</em> (d’où le <em>gg</em> de <em>ggplot</em>).</p>
</div>
<div id="mon-premier-ggplot" class="section level2">
<h2><span class="header-section-number">4.8</span> Mon premier ggplot</h2>
<p>Pour notre premier exercice, je vais charger un tableau depuis le fichier de données <a href="https://github.com/ajschumacher/gadsdc1/blob/master/dataset_research/clara_abalone.md"><code>abalone.data</code></a>. Pour plus de détails sur les tableaux de données, consultez le chapitre <a href="chapitre-tableaux.html#chapitre-tableaux">3</a>. Le fichier de données porte sur un escargot de mer et comprend le sexe (M: mâle, F: femelle et I: enfant), des poids et dimensions des individus observés, et le nombre d’anneaux comptés dans la coquille.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" title="1">abalone &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/abalone.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   Type = col_character(),
##   LongestShell = col_double(),
##   Diameter = col_double(),
##   Height = col_double(),
##   WholeWeight = col_double(),
##   ShuckedWeight = col_double(),
##   VisceraWeight = col_double(),
##   ShellWeight = col_double(),
##   Rings = col_double()
## )</code></pre>
<p>Inspectons l’entête du tableau avec la fonction <code>head()</code>.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" title="1"><span class="kw">head</span>(abalone)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 9
##   Type  LongestShell Diameter Height WholeWeight ShuckedWeight VisceraWeight ShellWeight Rings
##   &lt;chr&gt;        &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
## 1 M            0.455    0.365  0.095       0.514        0.224         0.101        0.15     15
## 2 M            0.35     0.265  0.09        0.226        0.0995        0.0485       0.07      7
## 3 F            0.53     0.42   0.135       0.677        0.256         0.142        0.21      9
## 4 M            0.44     0.365  0.125       0.516        0.216         0.114        0.155    10
## 5 I            0.33     0.255  0.08        0.205        0.0895        0.0395       0.055     7
## 6 I            0.425    0.3    0.095       0.352        0.141         0.0775       0.12      8</code></pre>
<p>Suivant la grammaire graphique <strong><code>ggplot2</code></strong>, on pourra créer ce graphique de points comprenant les attributs suivants suivants.</p>
<ol style="list-style-type: decimal">
<li><code>data = abalone</code>, le fichier de données.</li>
<li><code>mapping = aes(...)</code>, spécifié comme attribut de la fonction <code>ggplot()</code>, cet encodage (ou <code>aes</code>thetic) reste l’encodage par défaut pour tous les marqueurs du graphique. Toutefois, l’encodage <code>mapping = aes()</code> peut aussi être spécifié dans la fonction du marqueur (par exemple <code>geom_point()</code>). Dans l’encodage global du graphique, on place en x la longueur de la coquille (<code>x = LongestShell</code>) et on place en y le poids de la coquille (<code>y = ShellWeight</code>).</li>
<li>Pour ajouter une fonction à <code>ggplot</code>, comme une nouvelle couche de marqueur ou des éléments de thème, on utilise le <code>+</code>. Généralement, on change aussi de ligne.</li>
<li>Le marqueur ajouté est un point, <code>geom_point()</code>, dans lequel on spécifie un encodage de couleur sur la variable Type (<code>colour = Type</code>) et un encodage de dimension du point sur la variable rings (<code>size = Rings</code>). L’attribut <code>alpha = 0.5</code> se situe hors du mapping et de la fonction <code>aes()</code>: c’est un attribut identique pour tous les points.</li>
</ol>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> abalone, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> LongestShell, <span class="dt">y =</span> ShellWeight)) <span class="op">+</span></a>
<a class="sourceLine" id="cb194-2" title="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">colour =</span> Type, <span class="dt">size =</span> Rings), <span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-abalone-scatter1-1.png" width="672" /></p>
<p>Il existe plusieurs types de marqueurs:</p>
<ul>
<li><code>geom_point()</code> pour les points</li>
<li><code>geom_line()</code> pour les lignes</li>
<li><code>geom_bar()</code> pour les diagrammes en barre en décompte, <code>geom_col</code> en terme de grandeur et <code>geom_histogram</code> pour les histogrammes</li>
<li><code>geom_boxplot()</code> pour les boxplots</li>
<li><code>geom_errorbar()</code>, <code>geom_pointrange()</code> ou <code>geom_crossbar()</code> pour les marges d’erreur</li>
<li><code>geom_map()</code> pour les cartes</li>
<li>etc.</li>
</ul>
<p>Il existe plusieurs attributs d’encodage:</p>
<ul>
<li>la position <code>x</code>, <code>y</code> et <code>z</code> (<code>z</code> pertinent notamment pour le marqueur <code>geom_tile()</code>)</li>
<li>la taille <code>size</code></li>
<li>la forme des points <code>shape</code></li>
<li>la couleur, qui peut être discrète ou continue :
<ul>
<li><code>colour</code>, pour la couleur des contours</li>
<li><code>fill</code>, pour la couleur de remplissage</li>
</ul></li>
<li>le type de ligne <code>linetype</code></li>
<li>la transparence <code>alpha</code></li>
<li>et d’autres types spécialisés que vous retrouverez dans la documentation des marqueurs</li>
</ul>
<p>Les types de marqueurs et leurs encodages sont décrits dans la <a href="https://ggplot2.tidyverse.org/">documentation de <strong><code>ggplot2</code></strong></a>, qui fournit des feuilles aide-mémoire qu’il est commode d’imprimer et d’afficher près de soi (figure <a href="chapitre-visualisation.html#fig:vis-ggplot-cs">4.8</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:vis-ggplot-cs"></span>
<img src="images/03_data-visualization-2.1.png" alt="Aide-mémoire de **`ggplot2`**, source: https://www.rstudio.com/resources/cheatsheets/" width="100%" />
<p class="caption">
Figure 4.8: Aide-mémoire de <strong><code>ggplot2</code></strong>, source: <a href="https://www.rstudio.com/resources/cheatsheets/" class="uri">https://www.rstudio.com/resources/cheatsheets/</a>
</p>
</div>
<div id="les-facettes" class="section level4">
<h4><span class="header-section-number">4.8.0.1</span> Les facettes</h4>
<p>Dans <strong><code>ggplot2</code></strong>, les <code>facet</code>ttes sont un type spécial d’encodage utilisés pour définir des grilles de graphique. Elles prennent deux formes:</p>
<ul>
<li>Le collage, <code>facet_wrap()</code>. Une variable catégorielle est utilisée pour segmenter les graphiques en plusieurs graphiques, qui sont placés l’un à la suite de l’autre dans un arrangement spécifié par un nombre de colonne ou un nombre de ligne.</li>
<li>La grille, <code>facet_grid()</code>. Une ou deux variables segmentent les graphiques selon les colonnes et les lignes.</li>
</ul>
<p>Les facettes peuvent être spécifiées n’importe où dans la chaîne de commande de <strong><code>ggplot2</code></strong>, mais conventionnellement, on les place tout de suite après la fonction <code>ggplot()</code>.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb195-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> abalone, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> LongestShell, <span class="dt">y =</span> ShellWeight)) <span class="op">+</span></a>
<a class="sourceLine" id="cb195-2" title="2"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Type, <span class="dt">ncol =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb195-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">colour =</span> Type, <span class="dt">size =</span> Rings), <span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-abalone-scatter-facet-wrap-1.png" width="672" /></p>
<p>La fonction <code>cut()</code> permet de discrétiser des variables continues en catégories ordonnées - les fonctions peuvent être utilisées à l’intérieur de la fonction ggplot.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb196-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> abalone, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> LongestShell, <span class="dt">y =</span> ShellWeight)) <span class="op">+</span></a>
<a class="sourceLine" id="cb196-2" title="2"><span class="st">  </span><span class="kw">facet_grid</span>(Type <span class="op">~</span><span class="st"> </span><span class="kw">cut</span>(Rings, <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">30</span>, <span class="dv">5</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb196-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">colour =</span> Type), <span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-abalone-scatter-facet-grid-1.png" width="672" /></p>
<p>Par défaut, les axes des facettes, ainsi que leurs dimensions, sont les mêmes. Une telle représentation permet de comparer les facets sur une même échelle. Les axes peuvent être définis selon les données avec l’argument <code>scales</code>, tandis que l’espace des facettes peut être conditionné selon l’argument <code>space</code> - pour plus de détails, <a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">voir la fiche de documentation</a>.</p>
<p><strong>Exercice</strong>. Personnalisez le graphique avec les données <code>abalone</code> en remplaçant les variables et en réorganisant les facettes.</p>
</div>
<div id="plusieurs-sources-de-données" class="section level3">
<h3><span class="header-section-number">4.8.1</span> Plusieurs sources de données</h3>
<p>Il peut arriver que les données pour générer un graphique proviennent de plusieurs tableaux. Lorsqu’on ne spécifie pas la source du tableau dans un marqueur, la valeur par défaut est le tableau spécifier dans l’amorce <code>ggplot()</code>. Il est néanmoins possible de définir une source personnalisée pour chaque marqueur en spécifiant <code>data = ...</code> comme argument du marqueur.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb197-1" title="1">abalone_siteA &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb197-2" title="2">  <span class="dt">LongestShell =</span> <span class="kw">c</span>(<span class="fl">0.3</span>, <span class="fl">0.8</span>, <span class="fl">0.7</span>),</a>
<a class="sourceLine" id="cb197-3" title="3">  <span class="dt">ShellWeight =</span> <span class="kw">c</span>(<span class="fl">0.05</span>, <span class="fl">0.81</span>, <span class="fl">0.77</span>)</a>
<a class="sourceLine" id="cb197-4" title="4">)</a>
<a class="sourceLine" id="cb197-5" title="5"></a>
<a class="sourceLine" id="cb197-6" title="6"><span class="kw">ggplot</span>(<span class="dt">data =</span> abalone, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> LongestShell, <span class="dt">y =</span> ShellWeight)) <span class="op">+</span></a>
<a class="sourceLine" id="cb197-7" title="7"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">colour =</span> Type, <span class="dt">size =</span> Rings), <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb197-8" title="8"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> abalone_siteA, <span class="dt">size =</span> <span class="dv">8</span>, <span class="dt">shape =</span> <span class="dv">4</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-abalone-mult-source-1.png" width="672" /></p>
</div>
<div id="exporter-avec-style" class="section level3">
<h3><span class="header-section-number">4.8.2</span> Exporter avec style</h3>
<p>Le fond gris est une marque distinctive de <strong><code>ggplot2</code></strong>. Il n’est toutefois pas apprécié de tout le monde. D’autres thèmes dits <em>complets</em> peuvent être utilisés (<a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">liste des thèmes complets</a>). Les thèmes complets sont appelés avant la fonction <code>theme()</code>, qui permet d’effectuer des ajustements précis dont la liste exhaustive se trouve <a href="https://ggplot2.tidyverse.org/reference/theme.html">dans la documentation de <strong><code>ggplot2</code></strong></a>.</p>
<p>Vous pouvez aussi personnaliser le titre des axes (<code>xlab()</code> et <code>ylab()</code>) ou du graphique (<code>ggtitle()</code>), ou bien tout spécifier dans une même fonction ou bien tout en même temps dans <code>labs(x = "...", y = "...", title = "...")</code>. Il est possible d’utiliser des exposants dans le titre des axes avec la fonction <code>expression()</code>, par exemple <code>labs(x = expression("Dose (kg ha"^"-1"~")"))</code> pour intituler l’axe des x avec <span class="math inline">\(Dose~(kg~ha^{-1})\)</span>. Aussi convient parfois de spécifier les limites (<code>xlim()</code> et <code>ylim()</code>, ou <code>expand_limits(x = c(0, 1), y = c(0, 1))</code>).</p>
<p>Pour exporter un ggplot, on pourra utiliser les commandes de R <code>png()</code>, <code>svg()</code> ou <code>pdf()</code>, ou les outils de RStudio. Toutefois, <strong><code>ggplot2</code></strong> offre la fonction <code>ggsave()</code>, que l’on place en remorque du graphique, en spécifiant les dimensions (<code>width</code> et <code>height</code>) ainsi que la résolution (<code>dpi</code>). La résolution d’un graphique destiné à la publication est typiquement de plus de 300 dpi.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> abalone, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> LongestShell, <span class="dt">y =</span> ShellWeight)) <span class="op">+</span></a>
<a class="sourceLine" id="cb198-2" title="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">colour =</span> Type, <span class="dt">size =</span> Rings), <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb198-3" title="3"><span class="st">  </span><span class="co">#xlab(&quot;Length (mm)&quot;) +</span></a>
<a class="sourceLine" id="cb198-4" title="4"><span class="st">  </span><span class="co">#ylab(&quot;Shell weight (g)&quot;) +</span></a>
<a class="sourceLine" id="cb198-5" title="5"><span class="st">  </span><span class="co">#ggtitle(&quot;Abalone&quot;) + # préférablement dans une même ligne</span></a>
<a class="sourceLine" id="cb198-6" title="6"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Length (mm)&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Shell weight (g)&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Abalone&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb198-7" title="7"><span class="st">  </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb198-8" title="8"><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb198-9" title="9"><span class="st">  </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb198-10" title="10">    <span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">20</span>),</a>
<a class="sourceLine" id="cb198-11" title="11">    <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">20</span>),</a>
<a class="sourceLine" id="cb198-12" title="12">    <span class="dt">axis.text.y =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">20</span>, <span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="fl">0.5</span>),</a>
<a class="sourceLine" id="cb198-13" title="13">    <span class="dt">legend.box =</span> <span class="st">&quot;horizontal&quot;</span></a>
<a class="sourceLine" id="cb198-14" title="14">  )</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-abalone-custom-1.png" width="672" /></p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb199-1" title="1"><span class="kw">ggsave</span>(<span class="st">&quot;images/abalone.png&quot;</span>, <span class="dt">width =</span> <span class="dv">8</span>, <span class="dt">height =</span> <span class="dv">8</span>, <span class="dt">dpi =</span> <span class="dv">300</span>)</a></code></pre></div>
<p>Nous allons maintenant couvrir différents types de graphiques, accessibles selon différents marqueurs:</p>
<ul>
<li>les nuages de points</li>
<li>les diagrammes en ligne</li>
<li>les boxplots</li>
<li>les histogrammes</li>
<li>les diagrammes en barres</li>
</ul>
</div>
<div id="nuages-de-points" class="section level3">
<h3><span class="header-section-number">4.8.3</span> Nuages de points</h3>
<p>L’exemple précédent est un nuage de points, que nous avons généré avec le marqueur <code>geom_point()</code>, qui a déjà été passablement introduit. L’exploration de ces données a permis de détecter une croissance exponentielle du poids de la coquille en fonction de sa longueur. Il est clair que les abalones juvéniles (Type I) sont plus petits et moins lourds, mais nous devrons probablement procéder à des tests statistiques pour vérifier s’il y a des différences entre mâles et femelles.</p>
<p>Le graphique étant très chargé, nous avons utilisé des stratégies pour l’alléger en utilisant de la transparence et des facettes. Le marqueur <code>geom_jitter()</code> peut permettre de mieux apprécier la dispersion des points en ajoutant une dispersion randomisée en x ou en y.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> abalone, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> LongestShell, <span class="dt">y =</span> ShellWeight)) <span class="op">+</span></a>
<a class="sourceLine" id="cb200-2" title="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">colour =</span> Type, <span class="dt">size =</span> Rings), <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">width =</span> <span class="fl">0.05</span>, <span class="dt">height =</span> <span class="fl">0.1</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-abalone-scatter-jitter-1.png" width="672" /></p>
<p>Dans ce cas-ci, ça ne change pas beaucoup, mais retenons-le pour la suite.</p>
</div>
<div id="diagrammes-en-lignes" class="section level3">
<h3><span class="header-section-number">4.8.4</span> Diagrammes en lignes</h3>
<p>Les lignes sont utilisées pour exprimer des liens entre une suite d’information. Dans la plupart des cas, il s’agit d’une suite d’information dans le temps que l’on appelle les séries temporelles. En l’occurrence, les lignes devraient être évitées si la séquence entre les variables n’est pas évidente. Nous allons utiliser un tableau de données de R portant sur la croissance des orangers.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb201-1" title="1"><span class="kw">data</span>(<span class="st">&quot;Orange&quot;</span>)</a>
<a class="sourceLine" id="cb201-2" title="2"><span class="kw">head</span>(Orange)</a></code></pre></div>
<pre><code>## Grouped Data: circumference ~ age | Tree
##   Tree  age circumference
## 1    1  118            30
## 2    1  484            58
## 3    1  664            87
## 4    1 1004           115
## 5    1 1231           120
## 6    1 1372           142</code></pre>
<p>La première colonne spécifie le numéro de l’arbre mesuré, la deuxième son âge et la troisième sa circonférence. Le marqueur <code>geom_line()</code> permet de tracer la tendance de la circonférence selon l’âge. En encodant la couleur de la ligne à l’arbre, nous pourrons tracer une ligne pour chacun d’entre eux.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb203-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> Orange, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> age, <span class="dt">y =</span> circumference)) <span class="op">+</span></a>
<a class="sourceLine" id="cb203-2" title="2"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> Tree))</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-orange-line-1.png" width="672" /></p>
<p>La légende ne montre pas les numéros d’arbre en ordre croissance. En effet, la légende (tout comme les facettes) classe les catégories prioritairement selon l’ordre des catégories si elles sont ordinales, ou par ordre alphabétique si les catégories sont nominales. Inspectons la colonne <code>Tree</code> en inspectant le tableau avec la commande <code>str()</code> - la commande <code>glimpse()</code> du tidyverse donne un sommaire moins complet que <code>str()</code>.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" title="1"><span class="kw">str</span>(Orange)</a></code></pre></div>
<pre><code>## Classes &#39;nfnGroupedData&#39;, &#39;nfGroupedData&#39;, &#39;groupedData&#39; and &#39;data.frame&#39;:   35 obs. of  3 variables:
##  $ Tree         : Ord.factor w/ 5 levels &quot;3&quot;&lt;&quot;1&quot;&lt;&quot;5&quot;&lt;&quot;2&quot;&lt;..: 2 2 2 2 2 2 2 4 4 4 ...
##  $ age          : num  118 484 664 1004 1231 ...
##  $ circumference: num  30 58 87 115 120 142 145 33 69 111 ...
##  - attr(*, &quot;formula&quot;)=Class &#39;formula&#39;  language circumference ~ age | Tree
##   .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: R_EmptyEnv&gt; 
##  - attr(*, &quot;labels&quot;)=List of 2
##   ..$ x: chr &quot;Time since December 31, 1968&quot;
##   ..$ y: chr &quot;Trunk circumference&quot;
##  - attr(*, &quot;units&quot;)=List of 2
##   ..$ x: chr &quot;(days)&quot;
##   ..$ y: chr &quot;(mm)&quot;</code></pre>
<p>En effet, la colonne <code>Tree</code> est un facteur ordinal dont les niveaux sont dans le même ordre que celui la légende.</p>
</div>
<div id="les-histogrammes" class="section level3">
<h3><span class="header-section-number">4.8.5</span> Les histogrammes</h3>
<p>Nous avons vu les histogrammes dans la brève section sur les fonctions graphiques de base dans R: il s’agit de segmenter l’axe des x en incréments, puis de présenter sur l’axe de y le nombre de données que l’on retrouve dans cet incrément. Le marqueur à utiliser est <code>geom_histogram()</code>.</p>
<p>Revenons à nos escargots. Comment présenteriez-vous la longueur de la coquille selon la variable <code>Type</code>? Selon des couleurs ou des facettes? La couleur, dans le cas des histogrammes, est celle du pourtour des barres. Pour colorer l’intérieur des barres, l’argument à utiliser est <code>fill</code>.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb206-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> abalone, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> LongestShell)) <span class="op">+</span></a>
<a class="sourceLine" id="cb206-2" title="2"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">fill =</span> Type), <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>)</a></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/vis-ggplot-abalone-histogram-1.png" width="672" /></p>
<p>On n’y voit pas grand chose. Essayons plutôt les facettes.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> abalone, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> LongestShell)) <span class="op">+</span></a>
<a class="sourceLine" id="cb208-2" title="2"><span class="st">  </span><span class="kw">facet_grid</span>(Type <span class="op">~</span><span class="st"> </span>.) <span class="op">+</span></a>
<a class="sourceLine" id="cb208-3" title="3"><span class="st">  </span><span class="kw">geom_histogram</span>()</a></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/vis-ggplot-abalone-histogram-facet1-1.png" width="672" /></p>
<p>Les facettes permettent maintenant de bien distinguer la distribution des longueur des juvéniles. L’argument <code>bins</code>, tout comme l’argument <code>breaks</code> du module graphique de base, permet de spécifier le nombre d’incréments, ce qui peut être très utile en exploration de données.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> abalone, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> LongestShell)) <span class="op">+</span></a>
<a class="sourceLine" id="cb210-2" title="2"><span class="st">  </span><span class="kw">facet_grid</span>(Type <span class="op">~</span><span class="st"> </span>.) <span class="op">+</span></a>
<a class="sourceLine" id="cb210-3" title="3"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">60</span>, <span class="dt">colour =</span> <span class="st">&quot;white&quot;</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-abalone-histogram-facet2-1.png" width="672" /></p>
<p>Le nombre d’incréments est un paramètre qu’il ne faut pas sous-estimer. À preuve, ce tweet de <span class="citation">[@NicholasStrayer]</span>(<a href="https://twitter.com/NicholasStrayer" class="uri">https://twitter.com/NicholasStrayer</a>):</p>
<blockquote class="twitter-tweet" data-lang="fr">
<p lang="en" dir="ltr">
Histograms are fantastic, but make sure your bin-width/number is chosen well. This is the <em>exact</em> same data, plotted with different bin-widths. Notice that the pattern doesn't necessarily get clearer as bin num increases. <a href="https://twitter.com/hashtag/dataviz?src=hash&amp;ref_src=twsrc%5Etfw">#dataviz</a> <a href="https://t.co/3MhSFwTVPH">pic.twitter.com/3MhSFwTVPH</a>
</p>
— Nick Strayer (<span class="citation">@NicholasStrayer</span>) <a href="https://twitter.com/NicholasStrayer/status/1026893778404225024?ref_src=twsrc%5Etfw">7 août 2018</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div id="boxplots" class="section level3">
<h3><span class="header-section-number">4.8.6</span> Boxplots</h3>
<p>Les boxplots sont une autre manière de visualiser des distributions. L’astuce est de créer une boîte qui s’étant du premier quartile (valeur où l’on retrouve 25% de données dont la valeur est inférieure) au troisième quartile (valeur où l’on retrouve 75% de données dont la valeur est inférieure). Une barre à l’intérieur de cette boîte est placée à la médiane (qui est en fait le second quartile). De part et d’autre de la boîte, on retrouve des lignes spécifiant l’étendue hors quartile. Cette étendue peut être déterminée de plusieurs manières, mais dans le cas de <strong><code>ggplot2</code></strong>, il s’agit de 1.5 fois l’étendue de la boîte (l’<em>écart interquartile</em>). Au-delà de ces lignes, on retrouve les points représentant les valeurs extrêmes. Le marqueur à utiliser est <code>geom_boxplot()</code>. L’encodage x est la variable catégorielle et l’encodage y est la variable continue.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> abalone, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Type, <span class="dt">y =</span> LongestShell)) <span class="op">+</span></a>
<a class="sourceLine" id="cb211-2" title="2"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-abalone-boxplot-1.png" width="672" /></p>
<p><strong>Exercice</strong>. On suggère parfois de présenter les mesures sur les boxplots. Utiliser <code>geom_jitter()</code> avec un bruit horizontal.</p>
</div>
<div id="les-diagrammes-en-barre" class="section level3">
<h3><span class="header-section-number">4.8.7</span> Les diagrammes en barre</h3>
<p>Les diagrammes en barre représente une variable continue associée à une catégorie. Les barres sont généralement horizontales et ordonnées. Nous y reviendrons à la fin de ce chapitre, mais retenez pour l’instant que dans tous les cas, les diagrammes en barre doivent inclure le zéro pour éviter les mauvaises interprétations.</p>
<p>Pour les diagrammes en barre, nous allons utiliser les données de l’union internationale pour la conservation de la nature <a href="https://stats.oecd.org/Index.aspx?DataSetCode=WILD_LIFE">distribuées par l’OCDE</a>.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" title="1"><span class="co"># Certaines  colonnes de caractère sont considérées comme booléennes</span></a>
<a class="sourceLine" id="cb212-2" title="2"><span class="co"># mieux vaut définir leur type pour s&#39;assurer que le bon type</span></a>
<a class="sourceLine" id="cb212-3" title="3"><span class="co"># soit attribué</span></a>
<a class="sourceLine" id="cb212-4" title="4">especes_menacees &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/WILD_LIFE_14012020030114795.csv&quot;</span>,</a>
<a class="sourceLine" id="cb212-5" title="5">  <span class="dt">col_types =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb212-6" title="6">    <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>,</a>
<a class="sourceLine" id="cb212-7" title="7">    <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>,</a>
<a class="sourceLine" id="cb212-8" title="8">    <span class="st">&quot;d&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>,</a>
<a class="sourceLine" id="cb212-9" title="9">    <span class="st">&quot;d&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span></a>
<a class="sourceLine" id="cb212-10" title="10">  )</a>
<a class="sourceLine" id="cb212-11" title="11">)</a>
<a class="sourceLine" id="cb212-12" title="12"><span class="kw">head</span>(especes_menacees)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 15
##   IUCN  `IUCN Category` SPEC  Species COU   Country `Unit Code` Unit  `PowerCode Code`
##   &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;
## 1 TOT_~ Total number o~ MAMM~ Mammals AUS   Austra~ NBR         Numb~                0
## 2 ENDA~ Number of enda~ MAMM~ Mammals AUS   Austra~ NBR         Numb~                0
## 3 CRIT~ Number of crit~ MAMM~ Mammals AUS   Austra~ NBR         Numb~                0
## 4 VULN~ Number of vuln~ MAMM~ Mammals AUS   Austra~ NBR         Numb~                0
## 5 THRE~ Total number o~ MAMM~ Mammals AUS   Austra~ NBR         Numb~                0
## 6 TOT_~ Total number o~ MAMM~ Mammals AUT   Austria NBR         Numb~                0
## # ... with 6 more variables: PowerCode &lt;chr&gt;, `Reference Period Code` &lt;chr&gt;, `Reference
## #   Period` &lt;chr&gt;, Value &lt;dbl&gt;, `Flag Codes` &lt;chr&gt;, Flags &lt;chr&gt;</code></pre>
<p>L’exercice consiste à créer un diagramme en barres horizontales du nombre de plantes vasculaires menacées de manière critique pour les 10 pays qui en contiennent le plus. Je vais effectuer quelques opérations sur ce tableau afin d’en arriver avec un tableau que nous pourrons convenablement mettre en graphique: n’y portez pas trop attention pour l’instant: ces opérations sont un avant-goût du prochain chapitre.</p>
<p>Nous allons filtrer le tableau pour obtenir le nombre de plantes vascularies critiquement menacées, sélectionner seulement le pays et le nombre d’espèces, les grouper par pays, additionner toutes les espèces pour chaque pays, les placer en ordre descendant et enfin sélectionner les 10 premiers. Comme vous le voyez, la création de graphique est liée de près avec la manipulation des tableaux!</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb214-1" title="1">especes_crit &lt;-<span class="st"> </span>especes_menacees <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb214-2" title="2"><span class="st">  </span><span class="kw">filter</span>(IUCN <span class="op">==</span><span class="st"> &quot;CRITICAL&quot;</span>, SPEC <span class="op">==</span><span class="st"> &quot;VASCULAR_PLANT&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb214-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Country, Value) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb214-4" title="4"><span class="st">  </span><span class="kw">group_by</span>(Country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb214-5" title="5"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n_critical_species =</span> <span class="kw">sum</span>(Value)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb214-6" title="6"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n_critical_species)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb214-7" title="7"><span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb214-8" title="8">especes_crit</a></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    Country         n_critical_species
##    &lt;chr&gt;                        &lt;dbl&gt;
##  1 United States                 1222
##  2 Japan                          525
##  3 Canada                         315
##  4 Czech Republic                 284
##  5 Spain                          271
##  6 Belgium                        253
##  7 Austria                        172
##  8 Slovak Republic                155
##  9 Australia                      148
## 10 Italy                          128</code></pre>
<p>Le premier type de diagramme en barre que nous allons couvrir est obtenu par le marqueur <code>geom_col()</code>.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb216-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> especes_crit, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Country, <span class="dt">y =</span> n_critical_species)) <span class="op">+</span></a>
<a class="sourceLine" id="cb216-2" title="2"><span class="st">  </span><span class="kw">geom_col</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-iucn-bar1-1.png" width="672" /></p>
<p>Ce graphique est perfectible. Les barres sont verticales et non ordonnées. Souvenons-nous que <strong><code>ggplot2</code></strong> ordonne par ordre alphabétique si aucun autre ordre est spécifié. Nous pouvons changer l’ordre en changeant l’ordre des niveaux de la variable <code>Country</code> selon le nombre d’espèces grâce à la fonction <code>fct_reorder</code>.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb217-1" title="1">especes_crit &lt;-<span class="st"> </span>especes_crit <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb217-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Country =</span> <span class="kw">fct_reorder</span>(Country, n_critical_species))</a></code></pre></div>
<p>Pour faire pivoter le graphique, nous ajoutons <code>coord_flip()</code> à la séquence.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb218-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> especes_crit, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Country, <span class="dt">y =</span> n_critical_species)) <span class="op">+</span></a>
<a class="sourceLine" id="cb218-2" title="2"><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb218-3" title="3"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-iucn-bar2-1.png" width="672" /></p>
<p>Une autre méthode, <code>geom_bar()</code>, est un raccourcis permettant de compter le nombre d’occurrence d’une variable unique. Par exemple, dans le tableau abalone, le nombre de fois que chaque niveau de la variable Type</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb219-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> abalone, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Type)) <span class="op">+</span></a>
<a class="sourceLine" id="cb219-2" title="2"><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb219-3" title="3"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-iucn-bar3-1.png" width="672" /></p>
<p>Personnellement, j’aime bien passer par un diagramme en lignes avec le marqueur <code>geom_segment()</code>. Cela me donne la flexibilité pour définir un largeur de trait et éventuellement d’ajouter un point au bout pour en faire un <a href="https://www.r-graph-gallery.com/lollipop-plot/">diagramme en suçon</a>. Tenez, j’en profite aussi pour y ajouter du texte (décalé horizontalement) et étendre les limtes pour m’assurer que les chiffres apparaissent bien.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb220-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> especes_crit, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Country, <span class="dt">y =</span> n_critical_species)) <span class="op">+</span></a>
<a class="sourceLine" id="cb220-2" title="2"><span class="st">  </span><span class="kw">geom_segment</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">xend =</span> Country, <span class="dt">yend =</span> <span class="dv">0</span>), <span class="dt">lwd =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb220-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">5</span>, <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb220-4" title="4"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> n_critical_species), <span class="dt">hjust =</span> <span class="fl">-0.5</span>) <span class="op">+</span><span class="st"> </span><span class="co"># si ce ne sont pas des valeurs entières, arrondir avec signif()</span></a>
<a class="sourceLine" id="cb220-5" title="5"><span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1300</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb220-6" title="6"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb220-7" title="7"><span class="st">  </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-iucn-bar4-1.png" width="672" /></p>
<p>Les diagrammes en barre peuvent être placés en relation avec d’autres. Reprenons notre manipulation de données précédente, mais en incluant tous les pays, pour les trois niveaux d’alerte, pour les poissons.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb221-1" title="1">especes_pays_iucn &lt;-<span class="st"> </span>especes_menacees <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb221-2" title="2"><span class="st">  </span><span class="kw">filter</span>(IUCN <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ENDANGERED&quot;</span>, <span class="st">&quot;VULNERABLE&quot;</span>, <span class="st">&quot;CRITICAL&quot;</span>), SPEC <span class="op">==</span><span class="st"> &quot;FISH_TOT&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb221-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(IUCN, Country, Value) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb221-4" title="4"><span class="st">  </span><span class="kw">group_by</span>(Country, IUCN) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb221-5" title="5"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n_species =</span> <span class="kw">sum</span>(Value)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb221-6" title="6"><span class="st">  </span><span class="kw">group_by</span>(Country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb221-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">n_tot =</span> <span class="kw">sum</span>(n_species)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb221-8" title="8"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># pour pouvoir modifier Country, non modifiable tant qu&#39;elle est une variable de regroupement (voir group_by)</span></a>
<a class="sourceLine" id="cb221-9" title="9"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Country =</span> <span class="kw">fct_reorder</span>(Country, n_tot))</a>
<a class="sourceLine" id="cb221-10" title="10"><span class="kw">head</span>(especes_pays_iucn)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   Country   IUCN       n_species n_tot
##   &lt;fct&gt;     &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt;
## 1 Australia CRITICAL           8    48
## 2 Australia ENDANGERED        16    48
## 3 Australia VULNERABLE        24    48
## 4 Austria   CRITICAL           6    39
## 5 Austria   ENDANGERED        18    39
## 6 Austria   VULNERABLE        15    39</code></pre>
<p>Pour placer les barres les unes à côté des autres, nous spécifions <code>position = "dodge"</code>.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb223-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> especes_pays_iucn, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Country, <span class="dt">y =</span> n_species)) <span class="op">+</span></a>
<a class="sourceLine" id="cb223-2" title="2"><span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> IUCN), <span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb223-3" title="3"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-iucn-bar6-1.png" width="672" /></p>
<p>Il est parfois plus pratique d’utiliser les facettes.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> especes_pays_iucn, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Country, <span class="dt">y =</span> n_species)) <span class="op">+</span></a>
<a class="sourceLine" id="cb224-2" title="2"><span class="st">  </span><span class="kw">facet_grid</span>(IUCN <span class="op">~</span><span class="st"> </span>.) <span class="op">+</span></a>
<a class="sourceLine" id="cb224-3" title="3"><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb224-4" title="4"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-iucn-bar6-facet-1.png" width="672" /></p>
<p>Pour perfectionner encore ce graphique, on pourrait <a href="https://trinkerrstuff.wordpress.com/2016/12/23/ordering-categories-within-ggplot2-facets/">réordonner les facettes individuellement</a>, mais ne nous égarons par trop.</p>
</div>
<div id="exporter-un-graphique" class="section level3">
<h3><span class="header-section-number">4.8.8</span> Exporter un graphique</h3>
<p>Plus besoin d’utiliser la fonction <code>png()</code> en mode <strong><code>ggplot2</code></strong>. Utilisons plutôt <code>ggsave()</code>.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb225-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> especes_pays_iucn, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Country, <span class="dt">y =</span> n_species)) <span class="op">+</span></a>
<a class="sourceLine" id="cb225-2" title="2"><span class="st">  </span><span class="kw">facet_grid</span>(IUCN <span class="op">~</span><span class="st"> </span>.) <span class="op">+</span></a>
<a class="sourceLine" id="cb225-3" title="3"><span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> IUCN)) <span class="op">+</span></a>
<a class="sourceLine" id="cb225-4" title="4"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb225-5" title="5"><span class="st">  </span><span class="kw">ggsave</span>(<span class="st">&quot;images/especes_pays_iucn.png&quot;</span>, <span class="dt">width =</span> <span class="dv">6</span>, <span class="dt">height =</span> <span class="dv">8</span>, <span class="dt">dpi =</span> <span class="dv">300</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-iucn-ggsave-1.png" width="672" /></p>
</div>
</div>
<div id="les-graphiques-comme-outil-dexploration-des-données" class="section level2">
<h2><span class="header-section-number">4.9</span> Les graphiques comme outil d’exploration des données</h2>
<div class="figure" style="text-align: center"><span id="fig:vis-allisonhorst-ggplot-expl"></span>
<img src="images/03_ggplot2_exploratory.png" alt="Explorer les données avec **`ggplot2`**, dessin de [@allison_horst](https://twitter.com/allison_horst)." width="100%" />
<p class="caption">
Figure 4.9: Explorer les données avec <strong><code>ggplot2</code></strong>, dessin de <span class="citation">[@allison_horst]</span>(<a href="https://twitter.com/allison_horst" class="uri">https://twitter.com/allison_horst</a>).
</p>
</div>
<p>La plupart des graphiques que vous créerez ne seront pas destinés à être publiés, mais serviront d’outil d’exploration des données. Le jeu de données datasaurus, présenté en <a href="#Pourquoi-explorer-grapiquement%3F">début de chapitre</a>, permet de saisir l’importance des outils graphiques pour bien comprendre les données.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb226-1" title="1">datasaurus &lt;-<span class="st"> </span><span class="kw">read_tsv</span>(<span class="st">&quot;data/DatasaurusDozen.tsv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   dataset = col_character(),
##   x = col_double(),
##   y = col_double()
## )</code></pre>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" title="1"><span class="kw">head</span>(datasaurus)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   dataset     x     y
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
## 1 dino     55.4  97.2
## 2 dino     51.5  96.0
## 3 dino     46.2  94.5
## 4 dino     42.8  91.4
## 5 dino     40.8  88.3
## 6 dino     38.7  84.9</code></pre>
<p>Projetons d’abord les coordonnées x et y sur un graphique. J’utilise FacetGrid ici, sachant que ce sera utile pour l’exploration.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb230-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> datasaurus, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) <span class="op">+</span></a>
<a class="sourceLine" id="cb230-2" title="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-datasaurus-scatter-1.png" width="672" /></p>
<p>Ce graphique pourrait ressembler à une distribution binormale, ou <em>un coup de 12 dans une porte de grange</em>. Mais on aperçoit des données alignées, parfois de manière rectiligne, parfois en forme d’ellipse. Le tableau <code>datasaurus</code> a une colonne d’information supplémentaire. Utilisons-la comme catégorie pour générer des couleurs différente.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb231-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> datasaurus, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) <span class="op">+</span></a>
<a class="sourceLine" id="cb231-2" title="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">colour =</span> dataset))</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-datasaurus-scatter-col-1.png" width="672" /></p>
<p>Ce n’est pas vraiment plus clair. Il y a toutefois des formes qui se dégage, comme des ellipse et des lignes. Et si je regarde bien, j’y vois une étoile. La catégorisation pourrait-elle être mieux utilisée si on segmentait par facettes au lieu de des couleurs?</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb232-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> datasaurus, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) <span class="op">+</span></a>
<a class="sourceLine" id="cb232-2" title="2"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>dataset, <span class="dt">nrow =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb232-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb232-4" title="4"><span class="st">  </span><span class="kw">coord_equal</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/vis-ggplot-datasaurus-scatter-facet-1.png" width="672" /></p>
<p>Voilà! Fait intéressant, ni les statistiques, ni les algorithmes de regroupement ne nous auraient été utiles pour différencier les groupes!</p>
<div id="des-graphiques-interactifs" class="section level3">
<h3><span class="header-section-number">4.9.1</span> Des graphiques interactifs!</h3>
<p>Les graphiques sont traditionnellement des images statiques. Toutefois, les graphiques n’étant pas dépendants de supports papiers peuvent être utilisés de manière différente, en ajoutant une couche d’interaction. Conçue à Montréal, plotly est un module graphique interactif en soi. Il peut être utilisé grâce à son outil web, tout comme il peut être interfacé avec R, Python, javascript, etc. Mais ce qui retient notre attention ici est son interface avec <strong><code>ggplot2</code></strong>.</p>
<p>Les graphiques <strong><code>ggplot2</code></strong> peuvent être enregistrés en tant qu’objets. Il peuvent conséquemment être manipulés par des fonctions. La fonction ggplotly permet de rendre votre ggplot interactif.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb233-1" title="1"><span class="kw">library</span>(<span class="st">&quot;plotly&quot;</span>)</a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;plotly&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     last_plot</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     filter</code></pre>
<pre><code>## The following object is masked from &#39;package:graphics&#39;:
## 
##     layout</code></pre>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb238-1" title="1">especes_crit_bar &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> especes_crit, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Country, <span class="dt">y =</span> n_critical_species)) <span class="op">+</span></a>
<a class="sourceLine" id="cb238-2" title="2"><span class="st">  </span><span class="kw">geom_segment</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">xend =</span> Country, <span class="dt">yend =</span> <span class="dv">0</span>), <span class="dt">lwd =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb238-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">6</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb238-4" title="4"><span class="st">  </span><span class="kw">coord_flip</span>()</a>
<a class="sourceLine" id="cb238-5" title="5"><span class="kw">ggplotly</span>(especes_crit_bar)</a></code></pre></div>
<p>&lt;div id="htmlwidget-d987c1664a9eb96d64e9" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d987c1664a9eb96d64e9">{"x":{"data":[{"x":[1222,0,null,525,0,null,315,0,null,284,0,null,271,0,null,253,0,null,172,0,null,155,0,null,148,0,null,128,0],"y":[10,10,null,9,9,null,8,8,null,7,7,null,6,6,null,5,5,null,4,4,null,3,3,null,2,2,null,1,1],"text":["Country: 10<br />yend: 0<br />Country: United States<br />n_critical_species: 1222","Country: 10<br />yend: 0<br />Country: United States<br />n_critical_species: 1222",null,"Country:  9<br />yend: 0<br />Country: Japan<br />n_critical_species:  525","Country:  9<br />yend: 0<br />Country: Japan<br />n_critical_species:  525",null,"Country:  8<br />yend: 0<br />Country: Canada<br />n_critical_species:  315","Country:  8<br />yend: 0<br />Country: Canada<br />n_critical_species:  315",null,"Country:  7<br />yend: 0<br />Country: Czech Republic<br />n_critical_species:  284","Country:  7<br />yend: 0<br />Country: Czech Republic<br />n_critical_species:  284",null,"Country:  6<br />yend: 0<br />Country: Spain<br />n_critical_species:  271","Country:  6<br />yend: 0<br />Country: Spain<br />n_critical_species:  271",null,"Country:  5<br />yend: 0<br />Country: Belgium<br />n_critical_species:  253","Country:  5<br />yend: 0<br />Country: Belgium<br />n_critical_species:  253",null,"Country:  4<br />yend: 0<br />Country: Austria<br />n_critical_species:  172","Country:  4<br />yend: 0<br />Country: Austria<br />n_critical_species:  172",null,"Country:  3<br />yend: 0<br />Country: Slovak Republic<br />n_critical_species:  155","Country:  3<br />yend: 0<br />Country: Slovak Republic<br />n_critical_species:  155",null,"Country:  2<br />yend: 0<br />Country: Australia<br />n_critical_species:  148","Country:  2<br />yend: 0<br />Country: Australia<br />n_critical_species:  148",null,"Country:  1<br />yend: 0<br />Country: Italy<br />n_critical_species:  128","Country:  1<br />yend: 0<br />Country: Italy<br />n_critical_species:  128"],"type":"scatter","mode":"lines","line":{"width":7.55905511811024,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1222,525,315,284,271,253,172,155,148,128],"y":[10,9,8,7,6,5,4,3,2,1],"text":["Country: United States<br />n_critical_species: 1222","Country: Japan<br />n_critical_species:  525","Country: Canada<br />n_critical_species:  315","Country: Czech Republic<br />n_critical_species:  284","Country: Spain<br />n_critical_species:  271","Country: Belgium<br />n_critical_species:  253","Country: Austria<br />n_critical_species:  172","Country: Slovak Republic<br />n_critical_species:  155","Country: Australia<br />n_critical_species:  148","Country: Italy<br />n_critical_species:  128"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":22.6771653543307,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":113.24200913242},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-61.1,1283.1],"tickmode":"array","ticktext":["0","250","500","750","1000","1250"],"tickvals":[0,250,500,750,1000,1250],"categoryorder":"array","categoryarray":["0","250","500","750","1000","1250"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"n_critical_species","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,10.6],"tickmode":"array","ticktext":["Italy","Australia","Slovak Republic","Austria","Belgium","Spain","Czech Republic","Canada","Japan","United States"],"tickvals":[1,2,3,4,5,6,7,8,9,10],"categoryorder":"array","categoryarray":["Italy","Australia","Slovak Republic","Austria","Belgium","Spain","Czech Republic","Canada","Japan","United States"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Country","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"104cf253bf":{"xend":{},"yend":{},"x":{},"y":{},"type":"scatter"},"104c5e355674":{"x":{},"y":{}}},"cur_data":"104cf253bf","visdat":{"104cf253bf":["function (y) ","x"],"104c5e355674":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><
Vous pouvez publier votre graphique plotly en ligne pour le partager ou l’inclure dans une publication web. Il vous faudra créer un compte plotly, puis générer une clé d’utilisation dans Settings &gt; API Keys &gt; Generate key. Pour des raisons de sécurité, la clé du bloc ci-dessous ne fonctionnera pas. J’ai désactivé le bloc de code, mais le résultat se trouve en suivant le lien généré par plotly: <a href="https://plot.ly/~essicolo/152/" class="uri">https://plot.ly/~essicolo/152/</a>.</p>
<pre><code>Sys.setenv(&quot;plotly_username&quot;=&quot;essicolo&quot;)
Sys.setenv(&quot;plotly_api_key&quot;=&quot;iavd1ycE2iiqOp9YD45I&quot;)

chart_link &lt;- api_create(x = ggplotly(especes_crit_bar), 
                         filename = &quot;public-graph&quot;,
                         sharing = &quot;public&quot;,
                         fileopt = &quot;overwrite&quot;)
chart_link</code></pre>
</div>
<div id="des-extensions-de-ggplot2" class="section level3">
<h3><span class="header-section-number">4.9.2</span> Des extensions de <strong><code>ggplot2</code></strong></h3>
<p><strong><code>ggplot2</code></strong> est un module graphique élégant et polyvalent. Il a pourtant bien des limitations. Justement, le module est conçu pour être implémenté avec des extensions. Vous en trouverez plusieurs sur <a href="http://www.ggplot2-exts.org/gallery/">ggplot2-exts.org</a>, mais en trouverez de nombreuses autres en cherchant avec le terme <strong><code>ggplot2</code></strong> sur <a href="https://github.com/search?q=ggplot2">github.com</a>, probablement la plate-forme (voire un réseau social) de développement de logiciels la plus utilisée dans le monde. En voici quelques unes.</p>
<ul>
<li><a href="https://github.com/cttobin/ggthemr"><strong><code>ggthemr</code></strong></a>: spécifier un thème graphique une seule fois dans votre session, et tout le reste suit.</li>
<li><a href="https://github.com/wilkelab/cowplot"><strong><code>cowplot</code></strong></a> et <a href="https://patchwork.data-imaginist.com/index.html"><strong><code>patchwork</code></strong></a> permettent de créer des graphiques prêts pour la publication, par exemple en créant des grilles de plusieurs ggplots, en les numérotant, etc.</li>
<li>Si les thèmes de base ne vous conviennent pas, vous en trouverez d’autres en installant <a href="https://github.com/jrnold/ggthemes"><strong><code>ggthemes</code></strong></a>.</li>
<li><a href="https://github.com/dkahle/ggmap"><strong><code>ggmap</code></strong></a> et <a href="https://github.com/paleolimbot/ggspatial"><strong><code>ggspatial</code></strong></a> sont deux extensions pour créer des cartes. Un chapitre sur les données spatiales est en développement.</li>
<li><a href="http://www.ggtern.com/"><strong><code>ggtern</code></strong></a> permet de créer des diagrammes ternaires, qui sont utiles pour la visualisation de proportions incluant trois composantes. Ce sujet est couvert au chapitre 6, en développement.</li>
</ul>
</div>
<div id="aller-plus-loin-avec-ggplot2" class="section level3">
<h3><span class="header-section-number">4.9.3</span> Aller plus loin avec <strong><code>ggplot2</code></strong></h3>
<ul>
<li><a href="@ClausWilke">Claus O. Wilke</a> est professeur en biologie intégrative à l’Université du Texas à Austin. Son livre <a href="https://serialmentor.com/dataviz/">Fundamentals of Data Visualization</a> est un guide théorique et pratique pour la visualisation de données avec <strong><code>ggplot2</code></strong>.</li>
<li>Le site <a href="https://www.data-to-viz.com/">data-to-viz.com</a> vous accompagne dans le choix du graphique à créer selon vos données.</li>
<li>Le site <a href="https://www.r-graph-gallery.com/">r-graph-gallery.com</a> offre des recettes pour créer des graphiques avec <strong><code>ggplot2</code></strong>.</li>
</ul>
</div>
</div>
<div id="extra-règles-particulières" class="section level2">
<h2><span class="header-section-number">4.10</span> Extra: Règles particulières</h2>
<blockquote>
<p>Les mauvais graphiques peuvent survenir à cause de l’ignorance, bien sûr, mais souvent ils existent pour la même raison que la boeuferie [<em>bullhist</em>] verbale ou écrite. Parfois, les gens ne se soucient pas de la façon dont ils présentent les données aussi longtemps que ça appuie leurs arguments et, parfois, ils ne se soucient pas que ça porte à confusion tant qu’ils ont l’air impressionnant. <span class="math inline">\(-\)</span> Carl Bergstorm et Jevin West, <a href="https://graphpaperdiaries.com/2017/04/09/calling-bs-read-along-week-6-data-visualization/">Calling Bullshit Read-Along Week 6: Data Visualization</a></p>
</blockquote>
<p>Une représentation visuelle est un outil tranchant qui peut autant présenter un état véritable des données qu’une perspective trompeuse. Bien souvent, une ou plusieurs des 5 qualités ne sont pas respectées. Les occasions d’erreur ne manquent pas - j’en ferai mention dans la section <em>Choisir le bon type de graphique</em>. Pour l’instant, notons quelques règles particulières.</p>
<div id="ne-tronquez-pas-inutilement-laxe-des-y" class="section level3">
<h3><span class="header-section-number">4.10.1</span> Ne tronquez pas inutilement l’axe des <span class="math inline">\(y\)</span></h3>
<p>Tronquer l’axe vertical peut amener à porter de fausses conclusions.</p>
<center>
<img src="https://i2.wp.com/flowingdata.com/wp-content/uploads/2015/08/bar-plots1.png?w=1800">
Effets sur la perception d’utiliser différentes références. Source: Yau (2015), <a href="https://flowingdata.com/2015/08/11/real-chart-rules-to-follow/">Real Chart Rules to Follow</a>.
</center>
<p>La règle semble simple: les diagrammes en barre (utilisés pour représenter une grandeur) devraient toujours présenter le 0 et les diagrammes en ligne (utilisés pour présenter des tendances) ne requiert pas nécessairement le zéro ((Bergstrom et West, Calling bullshit: Misleading axes on graphs)[<a href="http://callingbullshit.org/tools/tools_misleading_axes.html" class="uri">http://callingbullshit.org/tools/tools_misleading_axes.html</a>]). Mais le zéro n’est pas toujours lié à une quantité particulière, par exemple, la température ou un log-ratio. De plus, avec un diagramme en ligne on pourra toujours magnifier des tendances en zoomant sur une variation somme toute mineure. On arrive donc moins à une règle qu’une qualité d’un bon graphique, en particulier la qualité no 1 de Cairo: offrir une représentation honnête des données. Par exemple, Nathan Yau, auteur du blogue Flowing Data, <a href="https://flowingdata.com/2015/08/31/bar-chart-baselines-start-at-zero/">propose</a> de présenter des résultats de manière relative à la mesure initiale. C’est d’ailleurs ce qui a été fait pour générer le graphique de Michael Mann et al., ci-dessus, où le zéro correspond à la moyenne des températures enregistrées entre 1961 et 1990.</p>
<p>Il peut être tentant de tronquer l’axe des <span class="math inline">\(y\)</span> lorsque l’on désire superposer deux axes verticaux. Souvent, l’utilisation de plusieurs axes verticaux amène une perception de causalité dans des situations de <a href="http://www.tylervigen.com/spurious-correlations">fausses corrélations</a>. On ne devrait pas utiliser plusieurs axes verticaux.</p>
</div>
<div id="utilisez-un-encrage-proportionnel" class="section level3">
<h3><span class="header-section-number">4.10.2</span> Utilisez un encrage proportionnel</h3>
<p>Cette règle a été proposée par Edward Tufte dans <a href="https://ariane25.bibl.ulaval.ca/ariane/wicket/detail?c=ariane&amp;m=S&amp;rq.ct=PE&amp;rq.fa=false&amp;rq.r.esc=false&amp;rq.r.l%5B0%5D.c=TI&amp;rq.r.l%5B0%5D.ex=false&amp;rq.r.l%5B0%5D.op=AND&amp;rq.r.l%5B0%5D.v=Visual+Display+of+Quantitative+Information&amp;rq.r.la=*&amp;rq.r.loc=*&amp;rq.r.pft=false&amp;rq.r.ta=*&amp;rq.r.td=*&amp;rq.rows=2&amp;rq.st=1">Visual Display of Quantitative Information</a>. Une des raisons pour lesquelles on évite de tronquer l’axe des <span class="math inline">\(y\)</span> en particulier pour les diagrammes en barre est que l’aire représentant une mesure (la quantité d’“encre” nécessaire pour la dessiner) devrait être proportionnelle à sa magnitude. Les diagrammes en barre sont particulièrement sensibles à cette règle, étant donnée que la largeur des barres peuvent amplifier l’aire occupée. Deux solutions dans ce cas: (1) utiliser des barres minces ou (2) préférer des “diagrammes de points” (<em>dot charts</em>, à ne pas confondre aux nuages de points).</p>
<p>L’encrage a beau être proportionnel, la difficulté que les humains éprouvent à comparer la dimension des cercles, et <em>a fortiori</em> la dimension de parties de cercle, donne peu d’avantage à utiliser des diagrammes en pointe de tarte, souvent utilisés pour illustrer des proportions. Nathan Yau <a href="https://flowingdata.com/2015/08/11/real-chart-rules-to-follow/">suggère</a> de les utiliser avec suspicions et d’explorer d’<a href="https://flowingdata.com/2009/11/25/9-ways-to-visualize-proportions-a-guide/">autres options</a>.</p>
<p><img src="https://i0.wp.com/flowingdata.com/wp-content/uploads/2015/08/pies.png?w=1800&amp;ssl=1" /></p>
<p>Pour comparer deux proportions, une avenue intéressante est le diagramme en pente, suggéré notamment par <a href="http://annkemery.com/avoiding-diagonal-text/#">Ann K. Emery</a>.</p>
<p><img src="images/03_ann-emery-slope-chart.png" /></p>
<p>Par extension, le diagramme en pente devient un diagramme en ligne lorsque plusieurs types de proportions sont comparées, ou lorsque des proportions évoluent selon des données continuent.</p>
<p>De la même manière, les <a href="https://datavizcatalogue.com/methods/bubble_chart.html">diagrammes en bulles</a> ne devraient pas être représentatifs de la quantité, mais plutôt de contextualiser des données. Justement, le graphique tiré des données de <em>Gap minder</em> présenté plus haut est une contextualisation: l’aire d’un cercle ne permet pas de saisir la population d’un pays, mais de comparer grossièrement la population d’un pays par rapport aux autres.</p>
</div>
<div id="publiez-vos-données" class="section level3">
<h3><span class="header-section-number">4.10.3</span> Publiez vos données</h3>
<p>Vous avez peut-être déjà feuilleté un article et voulu avoir accès aux données incluses dans un graphique. Il existe des outils pour digitaliser des graphiques pour en extraire les données. Mais le processus est fastidieux, long, souvent peu précis. De plus en plus, les chercheurs sont encouragés à publier leurs données et leurs calculs. Matplotlib et Seaborn sont des outils graphiques classiques qui devraient être accompagnés des données et calculs ayant servi à les générer. Mais ce n’est pas idéal non plus. En revanche, les outils graphiques modernes comme Plotly et Altair peuvent être exportés en code javascipt, qui contient toutes les informations sur les données et la manière de les représenter graphiquement. Ce chapitre a pour objectif de vous familiariser avec les outils de base les plus communément utilisés en calcul scientifique avec Python, mais je vous encourage à explorer la nouvelle génération d’outils graphiques. Nous verrons ça au chapitre <a href="chapitre-git.html#chapitre-git">5</a>.</p>
</div>
<div id="visitez-www.junkcharts.typepad.com-de-temps-à-autre" class="section level3">
<h3><span class="header-section-number">4.10.4</span> Visitez www.junkcharts.typepad.com de temps à autre</h3>
<p>Le statisticien et blogueur Kaiser Fung s’affaire quotidiennement à proposer des améliorations à de mauvais graphiques sur son blogue <a href="www.junkcharts.typepad.com">Junk Charts</a>.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapitre-tableaux.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapitre-git.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
